"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("react"),t=require("@shopify/polaris"),C={Annual:"ANNUAL",Every30Days:"EVERY_30_DAYS"},ae={Public:"public",CustomerTag:"customerTag",ShopifyPlan:"shopifyPlan",Customer:"customer",Hidden:"hidden"},v={AmountPerInterval:"{{ amount }} per {{ interval }}",Back:"Back",Cancel:"Cancel",CancelConfirmation:"Are you sure you want to cancel your subscription?",CancelPlan:"Cancel plan",ChangePlan:"Change plan",CurrentPlan:"Current plan",CustomPlans:"Custom plans",CustomPlansDescription:"Plans tailored to your specific needs",DiscountAmount:"{{ amount }} discount",DiscountAmountExpired:"{{ amount }} discount expired",FreeTrialLength:"{{ trialDays }}-day free trial",Features:"Features",Month:"month",MonthShort:"mo",Monthly:"Monthly",NextBillingDate:"Next billing date",NotSubscribed:"You're not subscribed to a plan yet.",Year:"year",YearShort:"yr",Yearly:"Yearly",MostPopular:"Most popular",Per:"/",Plans:"Plans",Price:"Price",SelectPlan:"Select plan",SubscribeSuccessTitle:"Subscription successful",SubscribeSuccessBody:"Thanks for subscribing to our app!",Subscription:"Subscription",SubscriptionCancelled:"Subscription cancelled",UsageCharges:"Usage charges"},Se=e.createContext(),pe=()=>{const n=e.useContext(Se);if(n===void 0)throw new Error("useMantle must be used within a MantleProvider");return n},be=(n="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:n,notation:"standard"}),V=(n,c="USD",i=!0)=>{let d=be(c).format(n);return i&&(d=d.replace(/\.00$/,"")),d},ke=(n=C.Every30Days)=>{switch(n){case C.Annual:return"year";case C.Every30Days:default:return"month"}},xe=(n=C.Every30Days)=>{switch(n){case C.Annual:return"yr";case C.Every30Days:default:return"mo"}},ee=({interval:n=C.Every30Days,useShortFormPlanIntervals:c=!0})=>c?xe(n):ke(n),se=({plan:n,customFieldKey:c="recommended"})=>{var i;return!!((i=n.customFields)!=null&&i[c])},ue=({plan:n,customFieldKey:c="buttonLabel"})=>{var i;return((i=n.customFields)==null?void 0:i[c])||v.SelectPlan},Ce=({plan:n})=>{var c;return((c=n.discounts)==null?void 0:c.length)>0?n.discounts.reduce((i,d)=>i.discountedAmount<d.discountedAmount?i:d):void 0},$e=(n=4)=>n%4===0?{xs:6,sm:6,md:2,lg:3,xl:3}:n%3===0?{xs:6,sm:6,md:2,lg:4,xl:4}:n%2===0?{xs:6,sm:6,md:3,lg:6,xl:6}:n===1?{xs:6,sm:6,md:6,lg:12,xl:12}:{xs:6,sm:6,md:2,lg:4,xl:4},Be=(n=4)=>n%4===0?4:n%3===0?3:n%2===0?2:n===1?1:4;var q=function(c){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},c),e.createElement("path",{fillRule:"evenodd",d:"M15.78 5.97a.75.75 0 0 1 0 1.06l-6.5 6.5a.75.75 0 0 1-1.06 0l-3.25-3.25a.75.75 0 1 1 1.06-1.06l2.72 2.72 5.97-5.97a.75.75 0 0 1 1.06 0Z"}))};q.displayName="CheckIcon";var ie=function(c){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},c),e.createElement("path",{d:"M10.75 6.75a.75.75 0 0 0-1.5 0v2.5h-2.5a.75.75 0 0 0 0 1.5h2.5v2.5a.75.75 0 0 0 1.5 0v-2.5h2.5a.75.75 0 0 0 0-1.5h-2.5v-2.5Z"}))};ie.displayName="PlusIcon";const De=({plan:n,t:c,translatePlanName:i})=>e.createElement(t.BlockStack,{gap:"100"},e.createElement(t.Text,{variant:"headingMd",alignment:"center"},i?c(n.name):n.name),n.description&&e.createElement(t.Text,{variant:"bodyLg",tone:"subdued",alignment:"center"},c(n.description))),Me=({plan:n,discount:c,t:i,useShortFormPlanIntervals:d=!0})=>e.createElement(t.BlockStack,{gap:"100"},!!c&&e.createElement(t.InlineStack,{align:"center",blockAlign:"center",gap:"200"},e.createElement(t.Text,{variant:"heading3xl"},V(c.discountedAmount,n.currency,!0)),e.createElement(t.Text,{variant:"heading3xl",tone:"subdued",fontWeight:"medium",textDecorationLine:"line-through"},V(n.amount,n.currency,!0)),e.createElement(t.Text,{variant:"bodyLg",tone:"subdued"},i(v.Per)," ",i(ee({interval:n.interval,useShortFormPlanIntervals:d})))),!c&&e.createElement(t.InlineStack,{align:"center",blockAlign:"center",gap:"200"},e.createElement(t.Text,{alignment:"center",variant:"heading3xl"},V(n.amount,n.currency,!0)),e.createElement(t.Text,{alignment:"center",variant:"bodyLg",tone:"subdued"},i(v.Per)," ",i(ee({interval:n.interval,useShortFormPlanIntervals:d})))),n.usageCharges.length>0&&e.createElement(t.BlockStack,null,n.usageCharges.map((b,h)=>e.createElement(t.InlineStack,{key:`plan-usageCharge-${h}`,align:"center",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:ie,tone:"positive"})),e.createElement(t.Text,{variant:"bodyLg"},i(b.terms)))))),Pe=({plan:n,t:c,trialDaysAsFeature:i=!1})=>e.createElement(t.BlockStack,{gap:"300"},i&&n.trialDays&&n.trialDays>0?e.createElement(t.InlineStack,{align:"center",blockAlign:"center",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:q,tone:"positive"})),e.createElement(t.Text,{tone:"subdued"},c(v.FreeTrialLength).replace("{{ trialDays }}",n.trialDays))):null,n.featuresOrder.map((d,b)=>{const h=n.features[d];if(h.type!=="boolean"||h.value===!0)return e.createElement(t.InlineStack,{key:`plan-feature-${b}`,align:"center",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:q,tone:"positive"})),h.type==="boolean"?e.createElement(t.Text,{tone:"subdued"},c(h.name)):e.createElement(t.Text,{tone:"subdued"},h.value," ",c(h.name)))})),we=({plan:n,discount:c,buttonLabel:i,onSelectPlan:d,useShortFormPlanIntervals:b=!0,trialDaysAsFeature:h=!1,expanded:y=!1,isActivePlan:T=!1,isRecommendedPlan:k=!1,isCustomPlan:D=!1,showRecommendedPlanBadge:A=!0,t:x,translatePlanName:$=!0})=>{const[M,m]=e.useState(!1),u=x||(Y=>Y),B=async({plan:Y,discount:O})=>{d?(m(!0),await d({plan:Y,discount:O})!==!0&&m(!1)):console.log("No onSelectPlan callback provided")};return e.createElement(t.Box,{position:"relative",minHeight:"100%"},e.createElement(t.Box,{paddingBlock:y||k?void 0:"800",minHeight:"100%"},e.createElement(t.Box,{background:k||D?"bg-surface":"bg-surface-secondary",borderStyle:"solid",borderColor:"border",borderWidth:"025",paddingBlock:y||k?"1600":"800",paddingInline:"400",borderRadius:"200",minHeight:"calc(100% - calc(var(--p-space-800) * 2))"},e.createElement(t.BlockStack,{gap:"800"},e.createElement(t.BlockStack,{gap:"400"},e.createElement(De,{plan:n,t:u,translatePlanName:$}),e.createElement(Me,{plan:n,discount:c,useShortFormPlanIntervals:b,t:u})),e.createElement(t.Button,{size:"large",variant:k?"primary":"secondary",onClick:async()=>{await B({plan:n,discount:c})},disabled:T,loading:M},u(i||v.SelectPlan)),e.createElement(Pe,{plan:n,t:u,trialDaysAsFeature:h}),k&&A&&e.createElement(t.InlineStack,{align:"center",gap:"100"},e.createElement(t.Badge,{tone:"success"},u(v.MostPopular)))))))},R={Highlighted:"highlighted",Horizontal:"horizontal",Vertical:"vertical"},re=({plans:n,customer:c,onSelectPlan:i,planInterval:d,cardType:b=R.Horizontal,trialDaysAsFeature:h=!0,useShortFormPlanIntervals:y=!0,keyForRecommended:T="recommended",keyForCustomButtonLabel:k="buttonLabel",showRecommendedPlanBadge:D=!0,applyDiscount:A=!0,t:x,translatePlanName:$=!0})=>{var P;const M=(P=c==null?void 0:c.subscription)!=null&&P.active?c.subscription:void 0,m=M==null?void 0:M.plan,u=d?n.filter(S=>S.interval===d):n,B=b===R.Vertical?1:Be(u.length),Y=$e(B),O=x||(S=>S);return e.createElement(t.Grid,{columns:B},u.map(S=>{const _=A?Ce({plan:S}):void 0,p=(m==null?void 0:m.id)===S.id&&!!(M!=null&&M.cancelOn);return e.createElement(t.Grid.Cell,{columnSpan:Y,key:S.id},b===R.Highlighted&&e.createElement(we,{key:`HighlightedPlanCard-${S.id}`,plan:S,discount:_,onSelectPlan:i,isActivePlan:p,trialDaysAsFeature:h,useShortFormPlanIntervals:y,isCustomPlan:S.availability!==ae.Public,isRecommendedPlan:se({plan:S,customFieldKey:T}),buttonLabel:ue({plan:S,customFieldKey:k}),showRecommendedPlanBadge:D,t:O,translatePlanName:$}),b===R.Horizontal&&e.createElement(he,{key:`HorizontalPlanCard-${S.id}`,plan:S,discount:_,onSelectPlan:i,isActivePlan:p,trialDaysAsFeature:h,useShortFormPlanIntervals:y,isRecommendedPlan:se({plan:S,customFieldKey:T}),buttonLabel:ue({plan:S,customFieldKey:k}),showRecommendedPlanBadge:D,t:O,translatePlanName:$}))}))},Te=({customer:n,plans:c,onSubscribe:i,backUrl:d="",showRecommendedBadge:b=!0,customFieldCta:h,customFieldPlanRecommended:y="Recommended",showPlanIntervalToggle:T=!0,showTrialDaysAsFeature:k=!0,useShortFormPlanIntervals:D,pageWidth:A="default",showCustomPlans:x=!0})=>{const $=n==null?void 0:n.subscription,M=new URLSearchParams(window.location.search),m=c.some(p=>p.interval===C.Annual)&&c.some(p=>p.interval===C.Every30Days),u=c.find(p=>p.id===($==null?void 0:$.plan.id)),[B,Y]=e.useState(u?u.interval:m?C.Annual:C.Every30Days),O=c.filter(p=>p.availability===ae.Public),P=x?c.filter(p=>p.availability!==ae.Public):[],[S,_]=e.useState(M.get("subscribed")==="true");return e.createElement(t.Page,{title:v.Plans,backAction:d?{content:v.Back,url:d}:void 0,secondaryActions:T&&m?e.createElement(t.ButtonGroup,{variant:"segmented"},e.createElement(t.Button,{pressed:B===C.Every30Days,onClick:()=>Y(C.Every30Days)},v.Monthly),e.createElement(t.Button,{pressed:B===C.Annual,onClick:()=>Y(C.Annual)},v.Yearly)):void 0,fullWidth:A==="full",narrowWidth:A==="narrow"},e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(t.BlockStack,{gap:"1000"},S&&e.createElement(t.Banner,{tone:"success",title:v.SubscribeSuccessTitle,onDismiss:()=>{_(!1),window.history.replaceState({},document.title,window.location.pathname)}},v.SubscribeSuccessBody),e.createElement(re,{plans:O,onSelectPlan:i,planInterval:B,cardType:R.Horizontal,keyForRecommended:y,keyForCustomButtonLabel:h,trialDaysAsFeature:k,useShortFormPlanIntervals:D,showRecommendedPlanBadge:b}),(P==null?void 0:P.length)>0&&e.createElement(t.Divider,{borderColor:"border"}),(P==null?void 0:P.length)>0&&e.createElement(t.BlockStack,{gap:"300"},e.createElement(t.Box,{paddingInline:{xs:400,sm:0}},e.createElement(t.Text,{variant:"headingMd"},v.CustomPlans)),e.createElement(re,{plans:P,onSelectPlan:i,planInterval:B,cardType:R.Horizontal,keyForRecommended:y,keyForCustomButtonLabel:h,trialDaysAsFeature:k,useShortFormPlanIntervals:D,showRecommendedPlanBadge:b}))))))},de=({plan:n,t:c,translatePlanName:i,isRecommendedPlan:d=!1})=>e.createElement(t.BlockStack,null,e.createElement(t.InlineStack,{align:"space-between",gap:"100"},e.createElement(t.Text,{variant:"bodyLg"},i?c(n.name):n.name),d&&e.createElement(t.Badge,{tone:"success"},c(v.MostPopular))),n.description&&e.createElement(t.Text,{tone:"subdued"},c(n.description))),me=({plan:n,discount:c,t:i,useShortFormPlanIntervals:d=!0})=>e.createElement(t.BlockStack,{gap:"100"},!!c&&e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{variant:"headingXl"},V(c.discountedAmount,n.currency)),e.createElement(t.Text,{variant:"headingXl",tone:"subdued",fontWeight:"medium",textDecorationLine:"line-through"},n.amount),e.createElement(t.Text,{variant:"bodyLg",tone:"subdued"},i(v.Per)," ",i(ee({interval:n.interval,useShortFormPlanIntervals:d})))),!c&&e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{alignment:"center",variant:"headingXl"},V(n.amount,n.currency)),e.createElement(t.Text,{alignment:"center",variant:"bodyLg",tone:"subdued"},i(v.Per)," ",i(ee({interval:n.interval,useShortFormPlanIntervals:d})))),n.usageCharges&&n.usageCharges.length>0&&e.createElement(t.BlockStack,null,n.usageCharges.map((b,h)=>e.createElement(t.InlineStack,{key:`plan-usageCharge-${h}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:ie,tone:"positive"})),e.createElement(t.Text,{variant:"bodyLg"},i(b.terms)))))),ge=({plan:n,t:c,trialDaysAsFeature:i=!1})=>e.createElement(t.BlockStack,{gap:"100"},i&&n.trialDays&&n.trialDays>0?e.createElement(t.InlineStack,{align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:q,tone:"positive"})),e.createElement(t.Text,{tone:"subdued"},c(v.FreeTrialLength).replace("{{ trialDays }}",n.trialDays))):null,n.featuresOrder.map((d,b)=>{const h=n.features[d];if(h.type!=="boolean"||h.value===!0)return e.createElement(t.InlineStack,{key:`plan-feature-${b}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:q,tone:"positive"})),h.type==="boolean"?e.createElement(t.Text,{tone:"subdued"},c(h.name)):e.createElement(t.Text,{tone:"subdued"},h.value," ",c(h.name)))})),he=({plan:n,discount:c,buttonLabel:i,onSelectPlan:d,useShortFormPlanIntervals:b=!0,trialDaysAsFeature:h=!1,isRecommendedPlan:y=!1,isActivePlan:T=!1,t:k,translatePlanName:D=!0})=>{const[A,x]=e.useState(!1),$=k||(m=>m),M=async({plan:m,discount:u})=>{d?(x(!0),await d({plan:m,discount:u})!==!0&&x(!1)):console.log("No onSelectPlan callback provided")};return e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"400"},e.createElement(de,{plan:n,isRecommendedPlan:y,t:$,translatePlanName:D}),e.createElement(me,{plan:n,discount:c,useShortFormPlanIntervals:b,t:$}),e.createElement(t.Button,{size:"large",variant:y?"primary":"secondary",onClick:async()=>{await M({plan:n,discount:c})},disabled:T,loading:A},$(T?v.CurrentPlan:i||v.SelectPlan)),e.createElement(ge,{plan:n,trialDaysAsFeature:h,t:$})))},Ae=({customer:n,plans:c,onSubscribe:i,backUrl:d="",showRecommendedBadge:b=!0,customFieldCta:h=null,customFieldPlanRecommended:y="Recommended",showPlanIntervalToggle:T=!0,showTrialDaysAsFeature:k=!0,useShortFormPlanIntervals:D=!0,pageWidth:A="default",showCustomPlans:x=!0})=>{const $=n==null?void 0:n.subscription,M=new URLSearchParams(window.location.search),m=c.some(p=>p.interval===C.Annual)&&c.some(p=>p.interval===C.Every30Days),u=c.find(p=>p.id===($==null?void 0:$.plan.id)),[B,Y]=e.useState(u?u.interval:m?C.Annual:C.Every30Days),O=c.filter(p=>p.availability===ae.Public),P=x?c.filter(p=>p.availability!==ae.Public):[],[S,_]=e.useState(M.get("subscribed")==="true");return e.createElement(t.Page,{title:v.Plans,backAction:d&&d!==""?{content:v.Back,url:d}:void 0,secondaryActions:T&&m?e.createElement(t.ButtonGroup,{variant:"segmented"},e.createElement(t.Button,{pressed:B===C.Every30Days,onClick:()=>Y(C.Every30Days)},v.Monthly),e.createElement(t.Button,{pressed:B===C.Annual,onClick:()=>Y(C.Annual)},v.Yearly)):void 0,fullWidth:A==="full",narrowWidth:A==="narrow"},e.createElement(t.Box,{paddingBlockEnd:"800"},e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(t.BlockStack,{gap:"1000"},S&&e.createElement(t.Banner,{tone:"success",title:v.SubscribeSuccessTitle,onDismiss:()=>{_(!1),window.history.replaceState({},document.title,window.location.pathname)}},v.SubscribeSuccessBody),e.createElement(re,{plans:O,onSelectPlan:i,planInterval:B,cardType:R.Highlighted,keyForRecommended:y,keyForCustomButtonLabel:h,trialDaysAsFeature:k,useShortFormPlanIntervals:D,showRecommendedPlanBadge:b}),(P==null?void 0:P.length)>0&&e.createElement(t.Divider,{borderColor:"border"}),(P==null?void 0:P.length)>0&&e.createElement(t.BlockStack,{gap:"300"},e.createElement(t.Box,{paddingInline:{xs:400,sm:0}},e.createElement(t.Text,{variant:"headingMd"},v.CustomPlans)),e.createElement(re,{plans:P,onSelectPlan:i,planInterval:B,cardType:R.Highlighted,keyForRecommended:y,keyForCustomButtonLabel:h,trialDaysAsFeature:k,useShortFormPlanIntervals:D,showRecommendedPlanBadge:b})))))))},Le=({customer:n,plans:c,onSubscribe:i,backUrl:d="",showRecommendedBadge:b=!0,customFieldCta:h=null,customFieldPlanRecommended:y="Recommended",showPlanIntervalToggle:T=!1,showTrialDaysAsFeature:k=!0,useShortFormPlanIntervals:D=!0,pageWidth:A="default",showCustomPlans:x=!0})=>{const $=n==null?void 0:n.subscription,M=new URLSearchParams(window.location.search),m=c.some(a=>a.interval===C.Annual)&&c.some(a=>a.interval===C.Every30Days),u=c.find(a=>a.id===($==null?void 0:$.plan.id)),[B,Y]=e.useState(u?u.interval:m?C.Annual:C.Every30Days),O=c.filter(a=>a.availability!=="customerTag"&&a.availability!=="customer"),P=T&&m?O.filter(a=>a.interval===B):O,S=x?c.filter(a=>a.availability==="customerTag"||a.availability==="customer"):[],[_,p]=e.useState(M.get("subscribed")==="true"),K=({plan:a,discount:z})=>e.createElement(t.BlockStack,null,e.createElement(t.Text,{variant:"bodyLg"},a.name),a.description&&e.createElement(t.Text,{tone:"subdued"},a.description)),U=({plan:a,discount:z})=>e.createElement(t.BlockStack,{gap:"200"},e.createElement(t.Text,{fontWeight:"medium"},v.Features),e.createElement(t.BlockStack,{gap:"100"},k&&a.trialDays!==0&&e.createElement(t.InlineStack,{align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:q,tone:"positive"})),e.createElement(t.Text,{tone:"subdued"},v.FreeTrialLength.replace("{{ trialDays }}",a.trialDays))),a.featuresOrder.map((H,s)=>{const l=a.features[H];if(l.type!=="boolean"||l.value===!0)return e.createElement(t.InlineStack,{key:`plan-feature-${s}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:q,tone:"positive"})),l.type==="boolean"?e.createElement(t.Text,{tone:"subdued"},l.name):e.createElement(t.Text,{tone:"subdued"},l.value," ",l.name))}))),G=({plan:a,discount:z})=>e.createElement(t.BlockStack,{gap:"100"},z?e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{variant:"headingXl"},V(z.discountedAmount,a.currency)),e.createElement(t.Text,{variant:"headingXl",tone:"subdued",fontWeight:"medium",textDecorationLine:"line-through"},a.amount),e.createElement(t.Text,{variant:"bodyLg",tone:"subdued"},v.Per," ",ee({interval:a.interval,useShortFormPlanIntervals:D}))):e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{alignment:"center",variant:"headingXl"},V(a.amount,a.currency)),e.createElement(t.Text,{alignment:"center",variant:"bodyLg",tone:"subdued"},v.Per," ",ee({interval:a.interval,useShortFormPlanIntervals:D}))),a.usageCharges.length>0&&e.createElement(t.BlockStack,null,a.usageCharges.map((H,s)=>e.createElement(t.InlineStack,{key:`plan-usageCharge-${s}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:ie,tone:"positive"})),e.createElement(t.Text,{variant:"bodyLg"},H.terms))))),L=({plan:a,discount:z})=>{const H=h&&a.customFields[h],s=a.customFields&&a.customFields[y];return e.createElement(t.InlineStack,{blockAlign:"center",gap:"400"},e.createElement(t.Button,{size:"large",variant:s?"primary":"secondary",onClick:()=>i({planId:a.id,discountId:z==null?void 0:z.id}),disabled:(u==null?void 0:u.id)===a.id},(u==null?void 0:u.id)===a.id?v.CurrentPlan:H?a.customFields[h]:v.SelectPlan),s&&b&&e.createElement(t.Box,null,e.createElement(t.Badge,{tone:"success"},v.MostPopular)))};return e.createElement(t.Page,{title:v.Plans,backAction:d!==""?{content:v.Back,url:d}:void 0,secondaryActions:T&&m?e.createElement(t.ButtonGroup,{variant:"segmented"},e.createElement(t.Button,{pressed:B===C.Every30Days,onClick:()=>Y(C.Every30Days)},v.Monthly),e.createElement(t.Button,{pressed:B===C.Annual,onClick:()=>Y(C.Annual)},v.Year)):void 0,fullWidth:A==="full",narrowWidth:A==="narrow"},e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(t.BlockStack,{gap:"400"},_&&e.createElement(t.Banner,{tone:"success",title:v.SubscribeSuccessTitle,onDismiss:()=>{p(!1),window.history.replaceState({},document.title,window.location.pathname)}},v.SubscribeSuccessBody),P.map((a,z)=>{var s;const H=((s=a.discounts)==null?void 0:s.length)>0?a.discounts.reduce((l,r)=>l.discountedAmount<r.discountedAmount?l:r):null;return e.createElement(t.Card,{key:`plan-${z}`},e.createElement(t.Grid,null,e.createElement(t.Grid.Cell,{columnSpan:{xs:6,sm:6,md:3,lg:6,xl:12}},e.createElement(t.BlockStack,{gap:"400"},e.createElement(t.BlockStack,{gap:"200"},K({plan:a,discount:H}),G({plan:a,discount:H})),e.createElement(t.Box,null,L({plan:a,discount:H})))),e.createElement(t.Grid.Cell,{columnSpan:{xs:6,sm:6,md:3,lg:6,xl:12}},U({plan:a,discount:H}))))}),(S==null?void 0:S.length)>0&&e.createElement(t.Divider,{borderColor:"border"}),(S==null?void 0:S.length)>0&&e.createElement(t.BlockStack,{gap:"300"},e.createElement(t.Box,{paddingInline:{xs:400,sm:0}},e.createElement(t.Text,{variant:"headingMd"},v.CustomPlans)),e.createElement(t.Grid,null,S.map((a,z)=>{var s;const H=((s=a.discounts)==null?void 0:s.length)>0?a.discounts.reduce((l,r)=>l.discountedAmount<r.discountedAmount?l:r):null;return e.createElement(t.Grid.Cell,{key:`custom-plan-${z}`,columnSpan:columnSpan()},e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"400"},K({plan:a,discount:H}),G({plan:a,discount:H}),L({plan:a,discount:H}),U({plan:a,discount:H}))))})))))))};var ye=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fe(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ee={exports:{}};(function(n,c){(function(i,d){n.exports=d()})(ye,function(){var i=1e3,d=6e4,b=36e5,h="millisecond",y="second",T="minute",k="hour",D="day",A="week",x="month",$="quarter",M="year",m="date",u="Invalid Date",B=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,O={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(s){var l=["th","st","nd","rd"],r=s%100;return"["+s+(l[(r-20)%10]||l[r]||l[0])+"]"}},P=function(s,l,r){var g=String(s);return!g||g.length>=l?s:""+Array(l+1-g.length).join(r)+s},S={s:P,z:function(s){var l=-s.utcOffset(),r=Math.abs(l),g=Math.floor(r/60),o=r%60;return(l<=0?"+":"-")+P(g,2,"0")+":"+P(o,2,"0")},m:function s(l,r){if(l.date()<r.date())return-s(r,l);var g=12*(r.year()-l.year())+(r.month()-l.month()),o=l.clone().add(g,x),f=r-o<0,E=l.clone().add(g+(f?-1:1),x);return+(-(g+(r-o)/(f?o-E:E-o))||0)},a:function(s){return s<0?Math.ceil(s)||0:Math.floor(s)},p:function(s){return{M:x,y:M,w:A,d:D,D:m,h:k,m:T,s:y,ms:h,Q:$}[s]||String(s||"").toLowerCase().replace(/s$/,"")},u:function(s){return s===void 0}},_="en",p={};p[_]=O;var K="$isDayjsObject",U=function(s){return s instanceof z||!(!s||!s[K])},G=function s(l,r,g){var o;if(!l)return _;if(typeof l=="string"){var f=l.toLowerCase();p[f]&&(o=f),r&&(p[f]=r,o=f);var E=l.split("-");if(!o&&E.length>1)return s(E[0])}else{var w=l.name;p[w]=l,o=w}return!g&&o&&(_=o),o||!g&&_},L=function(s,l){if(U(s))return s.clone();var r=typeof l=="object"?l:{};return r.date=s,r.args=arguments,new z(r)},a=S;a.l=G,a.i=U,a.w=function(s,l){return L(s,{locale:l.$L,utc:l.$u,x:l.$x,$offset:l.$offset})};var z=function(){function s(r){this.$L=G(r.locale,null,!0),this.parse(r),this.$x=this.$x||r.x||{},this[K]=!0}var l=s.prototype;return l.parse=function(r){this.$d=function(g){var o=g.date,f=g.utc;if(o===null)return new Date(NaN);if(a.u(o))return new Date;if(o instanceof Date)return new Date(o);if(typeof o=="string"&&!/Z$/i.test(o)){var E=o.match(B);if(E){var w=E[2]-1||0,I=(E[7]||"0").substring(0,3);return f?new Date(Date.UTC(E[1],w,E[3]||1,E[4]||0,E[5]||0,E[6]||0,I)):new Date(E[1],w,E[3]||1,E[4]||0,E[5]||0,E[6]||0,I)}}return new Date(o)}(r),this.init()},l.init=function(){var r=this.$d;this.$y=r.getFullYear(),this.$M=r.getMonth(),this.$D=r.getDate(),this.$W=r.getDay(),this.$H=r.getHours(),this.$m=r.getMinutes(),this.$s=r.getSeconds(),this.$ms=r.getMilliseconds()},l.$utils=function(){return a},l.isValid=function(){return this.$d.toString()!==u},l.isSame=function(r,g){var o=L(r);return this.startOf(g)<=o&&o<=this.endOf(g)},l.isAfter=function(r,g){return L(r)<this.startOf(g)},l.isBefore=function(r,g){return this.endOf(g)<L(r)},l.$g=function(r,g,o){return a.u(r)?this[g]:this.set(o,r)},l.unix=function(){return Math.floor(this.valueOf()/1e3)},l.valueOf=function(){return this.$d.getTime()},l.startOf=function(r,g){var o=this,f=!!a.u(g)||g,E=a.p(r),w=function(J,N){var Z=a.w(o.$u?Date.UTC(o.$y,N,J):new Date(o.$y,N,J),o);return f?Z:Z.endOf(D)},I=function(J,N){return a.w(o.toDate()[J].apply(o.toDate("s"),(f?[0,0,0,0]:[23,59,59,999]).slice(N)),o)},F=this.$W,W=this.$M,j=this.$D,Q="set"+(this.$u?"UTC":"");switch(E){case M:return f?w(1,0):w(31,11);case x:return f?w(1,W):w(0,W+1);case A:var X=this.$locale().weekStart||0,te=(F<X?F+7:F)-X;return w(f?j-te:j+(6-te),W);case D:case m:return I(Q+"Hours",0);case k:return I(Q+"Minutes",1);case T:return I(Q+"Seconds",2);case y:return I(Q+"Milliseconds",3);default:return this.clone()}},l.endOf=function(r){return this.startOf(r,!1)},l.$set=function(r,g){var o,f=a.p(r),E="set"+(this.$u?"UTC":""),w=(o={},o[D]=E+"Date",o[m]=E+"Date",o[x]=E+"Month",o[M]=E+"FullYear",o[k]=E+"Hours",o[T]=E+"Minutes",o[y]=E+"Seconds",o[h]=E+"Milliseconds",o)[f],I=f===D?this.$D+(g-this.$W):g;if(f===x||f===M){var F=this.clone().set(m,1);F.$d[w](I),F.init(),this.$d=F.set(m,Math.min(this.$D,F.daysInMonth())).$d}else w&&this.$d[w](I);return this.init(),this},l.set=function(r,g){return this.clone().$set(r,g)},l.get=function(r){return this[a.p(r)]()},l.add=function(r,g){var o,f=this;r=Number(r);var E=a.p(g),w=function(W){var j=L(f);return a.w(j.date(j.date()+Math.round(W*r)),f)};if(E===x)return this.set(x,this.$M+r);if(E===M)return this.set(M,this.$y+r);if(E===D)return w(1);if(E===A)return w(7);var I=(o={},o[T]=d,o[k]=b,o[y]=i,o)[E]||1,F=this.$d.getTime()+r*I;return a.w(F,this)},l.subtract=function(r,g){return this.add(-1*r,g)},l.format=function(r){var g=this,o=this.$locale();if(!this.isValid())return o.invalidDate||u;var f=r||"YYYY-MM-DDTHH:mm:ssZ",E=a.z(this),w=this.$H,I=this.$m,F=this.$M,W=o.weekdays,j=o.months,Q=o.meridiem,X=function(N,Z,ne,le){return N&&(N[Z]||N(g,f))||ne[Z].slice(0,le)},te=function(N){return a.s(w%12||12,N,"0")},J=Q||function(N,Z,ne){var le=N<12?"AM":"PM";return ne?le.toLowerCase():le};return f.replace(Y,function(N,Z){return Z||function(ne){switch(ne){case"YY":return String(g.$y).slice(-2);case"YYYY":return a.s(g.$y,4,"0");case"M":return F+1;case"MM":return a.s(F+1,2,"0");case"MMM":return X(o.monthsShort,F,j,3);case"MMMM":return X(j,F);case"D":return g.$D;case"DD":return a.s(g.$D,2,"0");case"d":return String(g.$W);case"dd":return X(o.weekdaysMin,g.$W,W,2);case"ddd":return X(o.weekdaysShort,g.$W,W,3);case"dddd":return W[g.$W];case"H":return String(w);case"HH":return a.s(w,2,"0");case"h":return te(1);case"hh":return te(2);case"a":return J(w,I,!0);case"A":return J(w,I,!1);case"m":return String(I);case"mm":return a.s(I,2,"0");case"s":return String(g.$s);case"ss":return a.s(g.$s,2,"0");case"SSS":return a.s(g.$ms,3,"0");case"Z":return E}return null}(N)||E.replace(":","")})},l.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},l.diff=function(r,g,o){var f,E=this,w=a.p(g),I=L(r),F=(I.utcOffset()-this.utcOffset())*d,W=this-I,j=function(){return a.m(E,I)};switch(w){case M:f=j()/12;break;case x:f=j();break;case $:f=j()/3;break;case A:f=(W-F)/6048e5;break;case D:f=(W-F)/864e5;break;case k:f=W/b;break;case T:f=W/d;break;case y:f=W/i;break;default:f=W}return o?f:a.a(f)},l.daysInMonth=function(){return this.endOf(x).$D},l.$locale=function(){return p[this.$L]},l.locale=function(r,g){if(!r)return this.$L;var o=this.clone(),f=G(r,g,!0);return f&&(o.$L=f),o},l.clone=function(){return a.w(this.$d,this)},l.toDate=function(){return new Date(this.valueOf())},l.toJSON=function(){return this.isValid()?this.toISOString():null},l.toISOString=function(){return this.$d.toISOString()},l.toString=function(){return this.$d.toUTCString()},s}(),H=z.prototype;return L.prototype=H,[["$ms",h],["$s",y],["$m",T],["$H",k],["$W",D],["$M",x],["$y",M],["$D",m]].forEach(function(s){H[s[1]]=function(l){return this.$g(l,s[0],s[1])}}),L.extend=function(s,l){return s.$i||(s(l,z,L),s.$i=!0),L},L.locale=G,L.isDayjs=U,L.unix=function(s){return L(1e3*s)},L.en=p[_],L.Ls=p,L.p={},L})})(Ee);var Ie=Ee.exports;const ce=fe(Ie);var ve={exports:{}};(function(n,c){(function(i,d){n.exports=d()})(ye,function(){var i={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(d,b,h){var y=b.prototype,T=y.format;h.en.formats=i,y.format=function(k){k===void 0&&(k="YYYY-MM-DDTHH:mm:ssZ");var D=this.$locale().formats,A=function(x,$){return x.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(M,m,u){var B=u&&u.toUpperCase();return m||$[u]||i[u]||$[B].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(Y,O,P){return O||P.slice(1)})})}(k,D===void 0?{}:D);return T.call(this,A)}}})})(ve);var Ye=ve.exports;const He=fe(Ye);ce.extend(He);const oe=({orientation:n="horizontal",onShowPlans:c,onCancelPlan:i,onPlanCancelled:d=()=>{},cancelSubscription:b=async()=>{},i18n:h,subscription:y,refetch:T=async()=>{},t:k,translatePlanName:D=!0})=>{var U;const[A,x]=e.useState(!1),[$,M]=e.useState(!1),m=k||(G=>G),u={...v,...h||{}};if(!y)return e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"200"},e.createElement(t.Text,{variant:"headingMd"},m(u.Subscription)),e.createElement(t.Text,null,m(u.NotSubscribed)),e.createElement(t.InlineStack,{align:"end"},e.createElement(t.ButtonGroup,null,e.createElement(t.Button,{variant:"primary",onClick:c,accessibilityLabel:m(u.ChangePlan)},m(u.SelectPlan))))));const{plan:B}=y,Y=V(y.total,B.currency),O=m(B.interval===C.Annual?u.Year:u.Month),P=n==="horizontal"?t.InlineGrid:t.BlockStack,S=(U=y==null?void 0:y.appliedDiscount)==null?void 0:U.discount,_=S?S.percentage?`${S.percentage}%`:V(S.amount,B.currency):null,p=S&&y.appliedDiscount.discountEndsAt&&ce().isAfter(ce(y.appliedDiscount.discountEndsAt)),K=S?{xs:1,md:3}:{xs:1,md:2};return e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"200"},e.createElement(t.Text,{variant:"headingMd"},m(u.Subscription)),e.createElement(t.BlockStack,{gap:"400"},e.createElement(P,{columns:K,gap:"300"},e.createElement(t.BlockStack,null,e.createElement(t.Text,null,m(u.CurrentPlan)),e.createElement(t.Text,{tone:"subdued"},D?m(B.name):B.name),y.cancelOn&&e.createElement(t.Text,{tone:"subdued"},m("Canceled, active until {{ date }}").replace("{{ date }}",ce(y.cancelOn).format("LL")))),e.createElement(t.BlockStack,null,e.createElement(t.Text,null,m(u.Price)),e.createElement(t.BlockStack,null,e.createElement(t.Text,{tone:"subdued"},m(u.AmountPerInterval).replace("{{ amount }}",Y).replace("{{ interval }}",O)),S&&!p&&e.createElement(t.Text,{tone:"success"},m(u.DiscountAmount).replace("{{ amount }}",_)),S&&p&&e.createElement(t.Text,{tone:"subdued",textDecorationLine:"line-through"},m(u.DiscountAmountExpired).replace("{{ amount }}",_)))),B.usageCharges.length>0&&e.createElement(t.BlockStack,null,e.createElement(t.Text,null,m(u.UsageCharges||"Usage charges")),B.usageCharges.map((G,L)=>e.createElement(t.Text,{key:`usage-charge-${L}`,tone:"subdued"},m(G.terms))))),e.createElement(t.InlineStack,{align:"end"},e.createElement(t.ButtonGroup,null,e.createElement(t.Button,{onClick:()=>{i?i():x(!0)},accessibilityLabel:m(u.CancelPlan),tone:"critical",disabled:!!y.cancelOn},m(u.CancelPlan)),e.createElement(t.Button,{variant:"primary",onClick:c,accessibilityLabel:m(u.ChangePlan)},m(u.ChangePlan)))))),A&&e.createElement(t.Modal,{open:!0,onClose:()=>x(!1),title:m(u.CancelPlan),primaryAction:{content:m(u.CancelPlan),destructive:!0,loading:$,disabled:$,onAction:async()=>{M(!0),await b(),await T(),M(!1),x(!1),d()}},secondaryActions:[{content:m(u.Back),disabled:$,onAction:()=>x(!1)}]},e.createElement(t.Modal.Section,null,m(u.CancelConfirmation))))},Fe=({backUrl:n="",pageWidth:c="narrow"})=>{const{cancelSubscription:i,i18n:d,subscription:b,refetch:h}=pe(),y=()=>{console.log("Show plans. Navigate to the plans page, open a modal, etc.")};return e.createElement(t.Page,{title:d.Subscription,backAction:n?{content:d.Back,url:n}:void 0,fullWidth:c==="full",narrowWidth:c==="narrow"},e.createElement(t.BlockStack,{gap:"400"},e.createElement(oe,{onShowPlans:y,cancelSubscription:i,i18n:d,subscription:b,refetch:h}),e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(oe,{onShowPlans:y,cancelSubscription:i,i18n:d,subscription:b,refetch:h})),e.createElement(t.Layout.Section,{variant:"oneThird"},e.createElement(oe,{onShowPlans:y,cancelSubscription:i,i18n:d,subscription:b,refetch:h,orientation:"vertical"})))))};exports.HighlightedPlanCards=Ae;exports.HorizontalPlanCard=he;exports.HorizontalPlanCards=Te;exports.PlanCardStack=re;exports.PlanCardType=R;exports.PlanFeaturesSection=ge;exports.PlanPricingSection=me;exports.PlanTitleSection=de;exports.SubscriptionSummaryCard=oe;exports.SubscriptionSummaryPage=Fe;exports.VerticalPlanCards=Le;
