"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("react"),t=require("@shopify/polaris"),v={Annual:"ANNUAL",Every30Days:"EVERY_30_DAYS"},ae={Public:"public",CustomerTag:"customerTag",ShopifyPlan:"shopifyPlan",Customer:"customer",Hidden:"hidden"},m={AmountPerInterval:"{{ amount }} per {{ interval }}",Back:"Back",Cancel:"Cancel",CancelConfirmation:"Are you sure you want to cancel your subscription?",CancelPlan:"Cancel plan",ChangePlan:"Change plan",CurrentPlan:"Current plan",CustomPlans:"Custom plans",CustomPlansDescription:"Plans tailored to your specific needs",DiscountAmount:"{{ amount }} discount",DiscountAmountExpired:"{{ amount }} discount expired",FreeTrialLength:"{{ trialDays }}-day free trial",Features:"Features",Month:"month",MonthShort:"mo",Monthly:"Monthly",NextBillingDate:"Next billing date",NotSubscribed:"You're not subscribed to a plan yet.",Year:"year",YearShort:"yr",Yearly:"Yearly",MostPopular:"Most popular",Per:"/",Plans:"Plans",Price:"Price",SelectPlan:"Select plan",SubscribeSuccessTitle:"Subscription successful",SubscribeSuccessBody:"Thanks for subscribing to our app!",Subscription:"Subscription",SubscriptionCancelled:"Subscription cancelled",UsageCharges:"Usage charges"},Ee=e.createContext(),fe=()=>{const n=e.useContext(Ee);if(n===void 0)throw new Error("useMantle must be used within a MantleProvider");return n},ve=(n="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:n,notation:"standard"}),U=(n,i="USD",u=!0)=>{let g=ve(i).format(n);return u&&(g=g.replace(/\.00$/,"")),g},Se=(n=v.Every30Days)=>{switch(n){case v.Annual:return"year";case v.Every30Days:default:return"month"}},be=(n=v.Every30Days)=>{switch(n){case v.Annual:return"yr";case v.Every30Days:default:return"mo"}},Q=({interval:n=v.Every30Days,useShortFormPlanIntervals:i=!0})=>i?be(n):Se(n),oe=({plan:n,customFieldKey:i="recommended"})=>{var u;return!!((u=n.customFields)!=null&&u[i])},se=({plan:n,customFieldKey:i="buttonLabel"})=>{var u;return((u=n.customFields)==null?void 0:u[i])||m.SelectPlan},pe=({plan:n})=>{var i;return((i=n.discounts)==null?void 0:i.length)>0?n.discounts.reduce((u,g)=>u.discountedAmount<g.discountedAmount?u:g):void 0},ke=(n=4)=>n%4===0?{xs:6,sm:6,md:2,lg:3,xl:3}:n%3===0?{xs:6,sm:6,md:2,lg:4,xl:4}:n%2===0?{xs:6,sm:6,md:3,lg:6,xl:6}:n===1?{xs:6,sm:6,md:6,lg:12,xl:12}:{xs:6,sm:6,md:2,lg:4,xl:4},xe=(n=4)=>n%4===0?4:n%3===0?3:n%2===0?2:n===1?1:4;var Z=function(i){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},i),e.createElement("path",{fillRule:"evenodd",d:"M15.78 5.97a.75.75 0 0 1 0 1.06l-6.5 6.5a.75.75 0 0 1-1.06 0l-3.25-3.25a.75.75 0 1 1 1.06-1.06l2.72 2.72 5.97-5.97a.75.75 0 0 1 1.06 0Z"}))};Z.displayName="CheckIcon";var ce=function(i){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},i),e.createElement("path",{d:"M10.75 6.75a.75.75 0 0 0-1.5 0v2.5h-2.5a.75.75 0 0 0 0 1.5h2.5v2.5a.75.75 0 0 0 1.5 0v-2.5h2.5a.75.75 0 0 0 0-1.5h-2.5v-2.5Z"}))};ce.displayName="PlusIcon";const Ce=({plan:n})=>e.createElement(t.BlockStack,{gap:"100"},e.createElement(t.Text,{variant:"headingMd",alignment:"center"},n.name),n.description&&e.createElement(t.Text,{variant:"bodyLg",tone:"subdued",alignment:"center"},n.description)),$e=({plan:n,discount:i,useShortFormPlanIntervals:u=!0})=>e.createElement(t.BlockStack,{gap:"100"},!!i&&e.createElement(t.InlineStack,{align:"center",blockAlign:"center",gap:"200"},e.createElement(t.Text,{variant:"heading3xl"},U(i.discountedAmount,n.currency,!0)),e.createElement(t.Text,{variant:"heading3xl",tone:"subdued",fontWeight:"medium",textDecorationLine:"line-through"},U(n.amount,n.currency,!0)),e.createElement(t.Text,{variant:"bodyLg",tone:"subdued"},m.Per," ",Q({interval:n.interval,useShortFormPlanIntervals:u}))),!i&&e.createElement(t.InlineStack,{align:"center",blockAlign:"center",gap:"200"},e.createElement(t.Text,{alignment:"center",variant:"heading3xl"},U(n.amount,n.currency,!0)),e.createElement(t.Text,{alignment:"center",variant:"bodyLg",tone:"subdued"},m.Per," ",Q({interval:n.interval,useShortFormPlanIntervals:u}))),n.usageCharges.length>0&&e.createElement(t.BlockStack,null,n.usageCharges.map((g,E)=>e.createElement(t.InlineStack,{key:`plan-usageCharge-${E}`,align:"center",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:ce,tone:"positive"})),e.createElement(t.Text,{variant:"bodyLg"},g.terms))))),Be=({plan:n,trialDaysAsFeature:i=!1})=>e.createElement(t.BlockStack,{gap:"300"},i&&n.trialDays&&n.trialDays>0?e.createElement(t.InlineStack,{align:"center",blockAlign:"center",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:Z,tone:"positive"})),e.createElement(t.Text,{tone:"subdued"},m.FreeTrialLength.replace("{{ trialDays }}",n.trialDays))):null,n.featuresOrder.map((u,g)=>{const E=n.features[u];if(E.type!=="boolean"||E.value===!0)return e.createElement(t.InlineStack,{key:`plan-feature-${g}`,align:"center",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:Z,tone:"positive"})),E.type==="boolean"?e.createElement(t.Text,{tone:"subdued"},E.name):e.createElement(t.Text,{tone:"subdued"},E.value," ",E.name))})),Pe=({plan:n,discount:i,buttonLabel:u,onSelectPlan:g,useShortFormPlanIntervals:E=!0,trialDaysAsFeature:d=!1,expanded:f=!1,isActivePlan:P=!1,isRecommendedPlan:$=!1,isCustomPlan:k=!1,showRecommendedPlanBadge:w=!0})=>e.createElement(t.Box,{position:"relative",minHeight:"100%"},e.createElement(t.Box,{paddingBlock:f||$?void 0:"800",minHeight:"100%"},e.createElement(t.Box,{background:$||k?"bg-surface":"bg-surface-secondary",borderStyle:"solid",borderColor:"border",borderWidth:"025",paddingBlock:f||$?"1600":"800",paddingInline:"400",borderRadius:"200",minHeight:"calc(100% - calc(var(--p-space-800) * 2))"},e.createElement(t.BlockStack,{gap:"800"},e.createElement(t.BlockStack,{gap:"400"},e.createElement(Ce,{plan:n}),e.createElement($e,{plan:n,discount:i,useShortFormPlanIntervals:E})),e.createElement(t.Button,{size:"large",variant:$?"primary":"secondary",onClick:()=>{g?g({plan:n,discount:i}):console.log("No onSelectPlan callback provided")},disabled:P},u||m.SelectPlan),e.createElement(Be,{plan:n,trialDaysAsFeature:d}),$&&w&&e.createElement(t.InlineStack,{align:"center",gap:"100"},e.createElement(t.Badge,{tone:"success"},m.MostPopular)))))),G={Highlighted:"highlighted",Horizontal:"horizontal",Vertical:"vertical"},re=({plans:n,customer:i,onSelectPlan:u,planInterval:g,cardType:E=G.Horizontal,trialDaysAsFeature:d=!0,useShortFormPlanIntervals:f=!0,keyForRecommended:P="recommended",keyForCustomButtonLabel:$="buttonLabel",showRecommendedPlanBadge:k=!0,applyDiscount:w=!0})=>{var x;const B=(x=i==null?void 0:i.subscription)!=null&&x.active?i.subscription:void 0,p=B==null?void 0:B.plan,L=g?n.filter(b=>b.interval===g):n,T=E===G.Vertical?1:xe(L.length),M=ke(T);return e.createElement(t.Grid,{columns:T},L.map(b=>{const z=w?pe({plan:b}):void 0;return e.createElement(t.Grid.Cell,{columnSpan:M,key:b.id},E===G.Highlighted&&e.createElement(Pe,{key:`HighlightedPlanCard-${b.id}`,plan:b,discount:z,onSelectPlan:u,isActivePlan:(p==null?void 0:p.id)===b.id,trialDaysAsFeature:d,useShortFormPlanIntervals:f,isCustomPlan:b.availability!==ae.Public,isRecommendedPlan:oe({plan:b,customFieldKey:P}),buttonLabel:se({plan:b,customFieldKey:$}),showRecommendedPlanBadge:k}),E===G.Horizontal&&e.createElement(he,{key:`HorizontalPlanCard-${b.id}`,plan:b,discount:z,onSelectPlan:u,isActivePlan:(p==null?void 0:p.id)===b.id,trialDaysAsFeature:d,useShortFormPlanIntervals:f,isRecommendedPlan:oe({plan:b,customFieldKey:P}),buttonLabel:se({plan:b,customFieldKey:$}),showRecommendedPlanBadge:k}))}))},De=({customer:n,plans:i,onSubscribe:u,backUrl:g="",showRecommendedBadge:E=!0,customFieldCta:d,customFieldPlanRecommended:f="Recommended",showPlanIntervalToggle:P=!0,showTrialDaysAsFeature:$=!0,useShortFormPlanIntervals:k,pageWidth:w="default",showCustomPlans:B=!0})=>{const p=n==null?void 0:n.subscription,L=new URLSearchParams(window.location.search),T=i.some(S=>S.interval===v.Annual)&&i.some(S=>S.interval===v.Every30Days),M=i.find(S=>S.id===(p==null?void 0:p.plan.id)),[x,b]=e.useState(M?M.interval:T?v.Annual:v.Every30Days),z=i.filter(S=>S.availability===ae.Public),D=B?i.filter(S=>S.availability!==ae.Public):[],[_,W]=e.useState(L.get("subscribed")==="true");return e.createElement(t.Page,{title:m.Plans,backAction:g?{content:m.Back,url:g}:void 0,secondaryActions:P&&T?e.createElement(t.ButtonGroup,{variant:"segmented"},e.createElement(t.Button,{pressed:x===v.Every30Days,onClick:()=>b(v.Every30Days)},m.Monthly),e.createElement(t.Button,{pressed:x===v.Annual,onClick:()=>b(v.Annual)},m.Yearly)):void 0,fullWidth:w==="full",narrowWidth:w==="narrow"},e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(t.BlockStack,{gap:"1000"},_&&e.createElement(t.Banner,{tone:"success",title:m.SubscribeSuccessTitle,onDismiss:()=>{W(!1),window.history.replaceState({},document.title,window.location.pathname)}},m.SubscribeSuccessBody),e.createElement(re,{plans:z,onSelectPlan:u,planInterval:x,cardType:G.Horizontal,keyForRecommended:f,keyForCustomButtonLabel:d,trialDaysAsFeature:$,useShortFormPlanIntervals:k,showRecommendedPlanBadge:E}),(D==null?void 0:D.length)>0&&e.createElement(t.Divider,{borderColor:"border"}),(D==null?void 0:D.length)>0&&e.createElement(t.BlockStack,{gap:"300"},e.createElement(t.Box,{paddingInline:{xs:400,sm:0}},e.createElement(t.Text,{variant:"headingMd"},m.CustomPlans)),e.createElement(re,{plans:D,onSelectPlan:u,planInterval:x,cardType:G.Horizontal,keyForRecommended:f,keyForCustomButtonLabel:d,trialDaysAsFeature:$,useShortFormPlanIntervals:k,showRecommendedPlanBadge:E}))))))},de=({plan:n,isRecommendedPlan:i=!1})=>e.createElement(t.BlockStack,null,e.createElement(t.InlineStack,{align:"space-between",gap:"100"},e.createElement(t.Text,{variant:"bodyLg"},n.name),i&&e.createElement(t.Badge,{tone:"success"},m.MostPopular)),n.description&&e.createElement(t.Text,{tone:"subdued"},n.description)),me=({plan:n,discount:i,useShortFormPlanIntervals:u=!0})=>e.createElement(t.BlockStack,{gap:"100"},!!i&&e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{variant:"headingXl"},U(i.discountedAmount,n.currency)),e.createElement(t.Text,{variant:"headingXl",tone:"subdued",fontWeight:"medium",textDecorationLine:"line-through"},n.amount),e.createElement(t.Text,{variant:"bodyLg",tone:"subdued"},m.Per," ",Q({interval:n.interval,useShortFormPlanIntervals:u}))),!i&&e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{alignment:"center",variant:"headingXl"},U(n.amount,n.currency)),e.createElement(t.Text,{alignment:"center",variant:"bodyLg",tone:"subdued"},m.Per," ",Q({interval:n.interval,useShortFormPlanIntervals:u}))),n.usageCharges&&n.usageCharges.length>0&&e.createElement(t.BlockStack,null,n.usageCharges.map((g,E)=>e.createElement(t.InlineStack,{key:`plan-usageCharge-${E}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:ce,tone:"positive"})),e.createElement(t.Text,{variant:"bodyLg"},g.terms))))),ge=({plan:n,trialDaysAsFeature:i=!1})=>e.createElement(t.BlockStack,{gap:"100"},i&&n.trialDays&&n.trialDays>0?e.createElement(t.InlineStack,{align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:Z,tone:"positive"})),e.createElement(t.Text,{tone:"subdued"},m.FreeTrialLength.replace("{{ trialDays }}",n.trialDays))):null,n.featuresOrder.map((u,g)=>{const E=n.features[u];if(E.type!=="boolean"||E.value===!0)return e.createElement(t.InlineStack,{key:`plan-feature-${g}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:Z,tone:"positive"})),E.type==="boolean"?e.createElement(t.Text,{tone:"subdued"},E.name):e.createElement(t.Text,{tone:"subdued"},E.value," ",E.name))})),he=({plan:n,discount:i,buttonLabel:u,onSelectPlan:g,useShortFormPlanIntervals:E=!0,trialDaysAsFeature:d=!1,isRecommendedPlan:f=!1,isActivePlan:P=!1})=>e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"400"},e.createElement(de,{plan:n,isRecommendedPlan:f}),e.createElement(me,{plan:n,discount:i,useShortFormPlanIntervals:E}),e.createElement(t.Button,{size:"large",variant:f?"primary":"secondary",onClick:()=>{g?g({plan:n,discount:i}):console.log("No onSelectPlan callback provided")},disabled:P},P?m.CurrentPlan:u||m.SelectPlan),e.createElement(ge,{plan:n,trialDaysAsFeature:d}))),we=({customer:n,plans:i,onSubscribe:u,backUrl:g="",showRecommendedBadge:E=!0,customFieldCta:d=null,customFieldPlanRecommended:f="Recommended",showPlanIntervalToggle:P=!0,showTrialDaysAsFeature:$=!0,useShortFormPlanIntervals:k=!0,pageWidth:w="default",showCustomPlans:B=!0})=>{const p=n==null?void 0:n.subscription,L=new URLSearchParams(window.location.search),T=i.some(S=>S.interval===v.Annual)&&i.some(S=>S.interval===v.Every30Days),M=i.find(S=>S.id===(p==null?void 0:p.plan.id)),[x,b]=e.useState(M?M.interval:T?v.Annual:v.Every30Days),z=i.filter(S=>S.availability===ae.Public),D=B?i.filter(S=>S.availability!==ae.Public):[],[_,W]=e.useState(L.get("subscribed")==="true");return e.createElement(t.Page,{title:m.Plans,backAction:g&&g!==""?{content:m.Back,url:g}:void 0,secondaryActions:P&&T?e.createElement(t.ButtonGroup,{variant:"segmented"},e.createElement(t.Button,{pressed:x===v.Every30Days,onClick:()=>b(v.Every30Days)},m.Monthly),e.createElement(t.Button,{pressed:x===v.Annual,onClick:()=>b(v.Annual)},m.Yearly)):void 0,fullWidth:w==="full",narrowWidth:w==="narrow"},e.createElement(t.Box,{paddingBlockEnd:"800"},e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(t.BlockStack,{gap:"1000"},_&&e.createElement(t.Banner,{tone:"success",title:m.SubscribeSuccessTitle,onDismiss:()=>{W(!1),window.history.replaceState({},document.title,window.location.pathname)}},m.SubscribeSuccessBody),e.createElement(re,{plans:z,onSelectPlan:u,planInterval:x,cardType:G.Highlighted,keyForRecommended:f,keyForCustomButtonLabel:d,trialDaysAsFeature:$,useShortFormPlanIntervals:k,showRecommendedPlanBadge:E}),(D==null?void 0:D.length)>0&&e.createElement(t.Divider,{borderColor:"border"}),(D==null?void 0:D.length)>0&&e.createElement(t.BlockStack,{gap:"300"},e.createElement(t.Box,{paddingInline:{xs:400,sm:0}},e.createElement(t.Text,{variant:"headingMd"},m.CustomPlans)),e.createElement(re,{plans:D,onSelectPlan:u,planInterval:x,cardType:G.Highlighted,keyForRecommended:f,keyForCustomButtonLabel:d,trialDaysAsFeature:$,useShortFormPlanIntervals:k,showRecommendedPlanBadge:E})))))))},Te=({customer:n,plans:i,onSubscribe:u,backUrl:g="",showRecommendedBadge:E=!0,customFieldCta:d=null,customFieldPlanRecommended:f="Recommended",showPlanIntervalToggle:P=!1,showTrialDaysAsFeature:$=!0,useShortFormPlanIntervals:k=!0,pageWidth:w="default",showCustomPlans:B=!0})=>{const p=n==null?void 0:n.subscription,L=new URLSearchParams(window.location.search),T=i.some(a=>a.interval===v.Annual)&&i.some(a=>a.interval===v.Every30Days),M=i.find(a=>a.id===(p==null?void 0:p.plan.id)),[x,b]=e.useState(M?M.interval:T?v.Annual:v.Every30Days),z=i.filter(a=>a.availability!=="customerTag"&&a.availability!=="customer"),D=P&&T?z.filter(a=>a.interval===x):z,_=B?i.filter(a=>a.availability==="customerTag"||a.availability==="customer"):[],[W,S]=e.useState(L.get("subscribed")==="true"),ee=({plan:a,discount:O})=>e.createElement(t.BlockStack,null,e.createElement(t.Text,{variant:"bodyLg"},a.name),a.description&&e.createElement(t.Text,{tone:"subdued"},a.description)),J=({plan:a,discount:O})=>e.createElement(t.BlockStack,{gap:"200"},e.createElement(t.Text,{fontWeight:"medium"},m.Features),e.createElement(t.BlockStack,{gap:"100"},$&&a.trialDays!==0&&e.createElement(t.InlineStack,{align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:Z,tone:"positive"})),e.createElement(t.Text,{tone:"subdued"},m.FreeTrialLength.replace("{{ trialDays }}",a.trialDays))),a.featuresOrder.map((H,o)=>{const l=a.features[H];if(l.type!=="boolean"||l.value===!0)return e.createElement(t.InlineStack,{key:`plan-feature-${o}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:Z,tone:"positive"})),l.type==="boolean"?e.createElement(t.Text,{tone:"subdued"},l.name):e.createElement(t.Text,{tone:"subdued"},l.value," ",l.name))}))),V=({plan:a,discount:O})=>e.createElement(t.BlockStack,{gap:"100"},O?e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{variant:"headingXl"},U(O.discountedAmount,a.currency)),e.createElement(t.Text,{variant:"headingXl",tone:"subdued",fontWeight:"medium",textDecorationLine:"line-through"},a.amount),e.createElement(t.Text,{variant:"bodyLg",tone:"subdued"},m.Per," ",Q({interval:a.interval,useShortFormPlanIntervals:k}))):e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{alignment:"center",variant:"headingXl"},U(a.amount,a.currency)),e.createElement(t.Text,{alignment:"center",variant:"bodyLg",tone:"subdued"},m.Per," ",Q({interval:a.interval,useShortFormPlanIntervals:k}))),a.usageCharges.length>0&&e.createElement(t.BlockStack,null,a.usageCharges.map((H,o)=>e.createElement(t.InlineStack,{key:`plan-usageCharge-${o}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:ce,tone:"positive"})),e.createElement(t.Text,{variant:"bodyLg"},H.terms))))),A=({plan:a,discount:O})=>{const H=d&&a.customFields[d],o=a.customFields&&a.customFields[f];return e.createElement(t.InlineStack,{blockAlign:"center",gap:"400"},e.createElement(t.Button,{size:"large",variant:o?"primary":"secondary",onClick:()=>u({planId:a.id,discountId:O==null?void 0:O.id}),disabled:(M==null?void 0:M.id)===a.id},(M==null?void 0:M.id)===a.id?m.CurrentPlan:H?a.customFields[d]:m.SelectPlan),o&&E&&e.createElement(t.Box,null,e.createElement(t.Badge,{tone:"success"},m.MostPopular)))};return e.createElement(t.Page,{title:m.Plans,backAction:g!==""?{content:m.Back,url:g}:void 0,secondaryActions:P&&T?e.createElement(t.ButtonGroup,{variant:"segmented"},e.createElement(t.Button,{pressed:x===v.Every30Days,onClick:()=>b(v.Every30Days)},m.Monthly),e.createElement(t.Button,{pressed:x===v.Annual,onClick:()=>b(v.Annual)},m.Year)):void 0,fullWidth:w==="full",narrowWidth:w==="narrow"},e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(t.BlockStack,{gap:"400"},W&&e.createElement(t.Banner,{tone:"success",title:m.SubscribeSuccessTitle,onDismiss:()=>{S(!1),window.history.replaceState({},document.title,window.location.pathname)}},m.SubscribeSuccessBody),D.map((a,O)=>{var o;const H=((o=a.discounts)==null?void 0:o.length)>0?a.discounts.reduce((l,r)=>l.discountedAmount<r.discountedAmount?l:r):null;return e.createElement(t.Card,{key:`plan-${O}`},e.createElement(t.Grid,null,e.createElement(t.Grid.Cell,{columnSpan:{xs:6,sm:6,md:3,lg:6,xl:12}},e.createElement(t.BlockStack,{gap:"400"},e.createElement(t.BlockStack,{gap:"200"},ee({plan:a,discount:H}),V({plan:a,discount:H})),e.createElement(t.Box,null,A({plan:a,discount:H})))),e.createElement(t.Grid.Cell,{columnSpan:{xs:6,sm:6,md:3,lg:6,xl:12}},J({plan:a,discount:H}))))}),(_==null?void 0:_.length)>0&&e.createElement(t.Divider,{borderColor:"border"}),(_==null?void 0:_.length)>0&&e.createElement(t.BlockStack,{gap:"300"},e.createElement(t.Box,{paddingInline:{xs:400,sm:0}},e.createElement(t.Text,{variant:"headingMd"},m.CustomPlans)),e.createElement(t.Grid,null,_.map((a,O)=>{var o;const H=((o=a.discounts)==null?void 0:o.length)>0?a.discounts.reduce((l,r)=>l.discountedAmount<r.discountedAmount?l:r):null;return e.createElement(t.Grid.Cell,{key:`custom-plan-${O}`,columnSpan:columnSpan()},e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"400"},ee({plan:a,discount:H}),V({plan:a,discount:H}),A({plan:a,discount:H}),J({plan:a,discount:H}))))})))))))};var Me=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ae(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ye={exports:{}};(function(n,i){(function(u,g){n.exports=g()})(Me,function(){var u=1e3,g=6e4,E=36e5,d="millisecond",f="second",P="minute",$="hour",k="day",w="week",B="month",p="quarter",L="year",T="date",M="Invalid Date",x=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,z={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(o){var l=["th","st","nd","rd"],r=o%100;return"["+o+(l[(r-20)%10]||l[r]||l[0])+"]"}},D=function(o,l,r){var s=String(o);return!s||s.length>=l?o:""+Array(l+1-s.length).join(r)+o},_={s:D,z:function(o){var l=-o.utcOffset(),r=Math.abs(l),s=Math.floor(r/60),c=r%60;return(l<=0?"+":"-")+D(s,2,"0")+":"+D(c,2,"0")},m:function o(l,r){if(l.date()<r.date())return-o(r,l);var s=12*(r.year()-l.year())+(r.month()-l.month()),c=l.clone().add(s,B),h=r-c<0,y=l.clone().add(s+(h?-1:1),B);return+(-(s+(r-c)/(h?c-y:y-c))||0)},a:function(o){return o<0?Math.ceil(o)||0:Math.floor(o)},p:function(o){return{M:B,y:L,w,d:k,D:T,h:$,m:P,s:f,ms:d,Q:p}[o]||String(o||"").toLowerCase().replace(/s$/,"")},u:function(o){return o===void 0}},W="en",S={};S[W]=z;var ee="$isDayjsObject",J=function(o){return o instanceof O||!(!o||!o[ee])},V=function o(l,r,s){var c;if(!l)return W;if(typeof l=="string"){var h=l.toLowerCase();S[h]&&(c=h),r&&(S[h]=r,c=h);var y=l.split("-");if(!c&&y.length>1)return o(y[0])}else{var C=l.name;S[C]=l,c=C}return!s&&c&&(W=c),c||!s&&W},A=function(o,l){if(J(o))return o.clone();var r=typeof l=="object"?l:{};return r.date=o,r.args=arguments,new O(r)},a=_;a.l=V,a.i=J,a.w=function(o,l){return A(o,{locale:l.$L,utc:l.$u,x:l.$x,$offset:l.$offset})};var O=function(){function o(r){this.$L=V(r.locale,null,!0),this.parse(r),this.$x=this.$x||r.x||{},this[ee]=!0}var l=o.prototype;return l.parse=function(r){this.$d=function(s){var c=s.date,h=s.utc;if(c===null)return new Date(NaN);if(a.u(c))return new Date;if(c instanceof Date)return new Date(c);if(typeof c=="string"&&!/Z$/i.test(c)){var y=c.match(x);if(y){var C=y[2]-1||0,I=(y[7]||"0").substring(0,3);return h?new Date(Date.UTC(y[1],C,y[3]||1,y[4]||0,y[5]||0,y[6]||0,I)):new Date(y[1],C,y[3]||1,y[4]||0,y[5]||0,y[6]||0,I)}}return new Date(c)}(r),this.init()},l.init=function(){var r=this.$d;this.$y=r.getFullYear(),this.$M=r.getMonth(),this.$D=r.getDate(),this.$W=r.getDay(),this.$H=r.getHours(),this.$m=r.getMinutes(),this.$s=r.getSeconds(),this.$ms=r.getMilliseconds()},l.$utils=function(){return a},l.isValid=function(){return this.$d.toString()!==M},l.isSame=function(r,s){var c=A(r);return this.startOf(s)<=c&&c<=this.endOf(s)},l.isAfter=function(r,s){return A(r)<this.startOf(s)},l.isBefore=function(r,s){return this.endOf(s)<A(r)},l.$g=function(r,s,c){return a.u(r)?this[s]:this.set(c,r)},l.unix=function(){return Math.floor(this.valueOf()/1e3)},l.valueOf=function(){return this.$d.getTime()},l.startOf=function(r,s){var c=this,h=!!a.u(s)||s,y=a.p(r),C=function(X,N){var R=a.w(c.$u?Date.UTC(c.$y,N,X):new Date(c.$y,N,X),c);return h?R:R.endOf(k)},I=function(X,N){return a.w(c.toDate()[X].apply(c.toDate("s"),(h?[0,0,0,0]:[23,59,59,999]).slice(N)),c)},F=this.$W,Y=this.$M,j=this.$D,q="set"+(this.$u?"UTC":"");switch(y){case L:return h?C(1,0):C(31,11);case B:return h?C(1,Y):C(0,Y+1);case w:var K=this.$locale().weekStart||0,te=(F<K?F+7:F)-K;return C(h?j-te:j+(6-te),Y);case k:case T:return I(q+"Hours",0);case $:return I(q+"Minutes",1);case P:return I(q+"Seconds",2);case f:return I(q+"Milliseconds",3);default:return this.clone()}},l.endOf=function(r){return this.startOf(r,!1)},l.$set=function(r,s){var c,h=a.p(r),y="set"+(this.$u?"UTC":""),C=(c={},c[k]=y+"Date",c[T]=y+"Date",c[B]=y+"Month",c[L]=y+"FullYear",c[$]=y+"Hours",c[P]=y+"Minutes",c[f]=y+"Seconds",c[d]=y+"Milliseconds",c)[h],I=h===k?this.$D+(s-this.$W):s;if(h===B||h===L){var F=this.clone().set(T,1);F.$d[C](I),F.init(),this.$d=F.set(T,Math.min(this.$D,F.daysInMonth())).$d}else C&&this.$d[C](I);return this.init(),this},l.set=function(r,s){return this.clone().$set(r,s)},l.get=function(r){return this[a.p(r)]()},l.add=function(r,s){var c,h=this;r=Number(r);var y=a.p(s),C=function(Y){var j=A(h);return a.w(j.date(j.date()+Math.round(Y*r)),h)};if(y===B)return this.set(B,this.$M+r);if(y===L)return this.set(L,this.$y+r);if(y===k)return C(1);if(y===w)return C(7);var I=(c={},c[P]=g,c[$]=E,c[f]=u,c)[y]||1,F=this.$d.getTime()+r*I;return a.w(F,this)},l.subtract=function(r,s){return this.add(-1*r,s)},l.format=function(r){var s=this,c=this.$locale();if(!this.isValid())return c.invalidDate||M;var h=r||"YYYY-MM-DDTHH:mm:ssZ",y=a.z(this),C=this.$H,I=this.$m,F=this.$M,Y=c.weekdays,j=c.months,q=c.meridiem,K=function(N,R,ne,le){return N&&(N[R]||N(s,h))||ne[R].slice(0,le)},te=function(N){return a.s(C%12||12,N,"0")},X=q||function(N,R,ne){var le=N<12?"AM":"PM";return ne?le.toLowerCase():le};return h.replace(b,function(N,R){return R||function(ne){switch(ne){case"YY":return String(s.$y).slice(-2);case"YYYY":return a.s(s.$y,4,"0");case"M":return F+1;case"MM":return a.s(F+1,2,"0");case"MMM":return K(c.monthsShort,F,j,3);case"MMMM":return K(j,F);case"D":return s.$D;case"DD":return a.s(s.$D,2,"0");case"d":return String(s.$W);case"dd":return K(c.weekdaysMin,s.$W,Y,2);case"ddd":return K(c.weekdaysShort,s.$W,Y,3);case"dddd":return Y[s.$W];case"H":return String(C);case"HH":return a.s(C,2,"0");case"h":return te(1);case"hh":return te(2);case"a":return X(C,I,!0);case"A":return X(C,I,!1);case"m":return String(I);case"mm":return a.s(I,2,"0");case"s":return String(s.$s);case"ss":return a.s(s.$s,2,"0");case"SSS":return a.s(s.$ms,3,"0");case"Z":return y}return null}(N)||y.replace(":","")})},l.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},l.diff=function(r,s,c){var h,y=this,C=a.p(s),I=A(r),F=(I.utcOffset()-this.utcOffset())*g,Y=this-I,j=function(){return a.m(y,I)};switch(C){case L:h=j()/12;break;case B:h=j();break;case p:h=j()/3;break;case w:h=(Y-F)/6048e5;break;case k:h=(Y-F)/864e5;break;case $:h=Y/E;break;case P:h=Y/g;break;case f:h=Y/u;break;default:h=Y}return c?h:a.a(h)},l.daysInMonth=function(){return this.endOf(B).$D},l.$locale=function(){return S[this.$L]},l.locale=function(r,s){if(!r)return this.$L;var c=this.clone(),h=V(r,s,!0);return h&&(c.$L=h),c},l.clone=function(){return a.w(this.$d,this)},l.toDate=function(){return new Date(this.valueOf())},l.toJSON=function(){return this.isValid()?this.toISOString():null},l.toISOString=function(){return this.$d.toISOString()},l.toString=function(){return this.$d.toUTCString()},o}(),H=O.prototype;return A.prototype=H,[["$ms",d],["$s",f],["$m",P],["$H",$],["$W",k],["$M",B],["$y",L],["$D",T]].forEach(function(o){H[o[1]]=function(l){return this.$g(l,o[0],o[1])}}),A.extend=function(o,l){return o.$i||(o(l,O,A),o.$i=!0),A},A.locale=V,A.isDayjs=J,A.unix=function(o){return A(1e3*o)},A.en=S[W],A.Ls=S,A.p={},A})})(ye);var Ie=ye.exports;const ue=Ae(Ie),ie=({orientation:n="horizontal",onShowPlans:i,onCancelPlan:u,onPlanCancelled:g=()=>{}})=>{var _;const{cancelSubscription:E,i18n:d,subscription:f,refetch:P}=fe(),[$,k]=e.useState(!1),[w,B]=e.useState(!1);if(!f)return e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"200"},e.createElement(t.Text,{variant:"headingMd"},d.Subscription),e.createElement(t.Text,null,d.NotSubscribed),e.createElement(t.InlineStack,{align:"end"},e.createElement(t.ButtonGroup,null,e.createElement(t.Button,{variant:"primary",onClick:i,accessibilityLabel:d.ChangePlan},d.SelectPlan)))));const{plan:p}=f,L=U(f.total,p.currency),T=p.interval===v.Annual?d.Year:d.Month,M=n==="horizontal"?t.InlineGrid:t.BlockStack,x=(_=f==null?void 0:f.appliedDiscount)==null?void 0:_.discount,b=x?x.percentage?`${x.percentage}%`:U(x.amount,p.currency):null,z=x&&f.appliedDiscount.discountEndsAt&&ue().isAfter(ue(f.appliedDiscount.discountEndsAt)),D=x?{xs:1,md:3}:{xs:1,md:2};return e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"200"},e.createElement(t.Text,{variant:"headingMd"},d.Subscription),e.createElement(t.BlockStack,{gap:"400"},e.createElement(M,{columns:D,gap:"300"},e.createElement(t.BlockStack,null,e.createElement(t.Text,null,d.CurrentPlan),e.createElement(t.Text,{tone:"subdued"},p.name)),e.createElement(t.BlockStack,null,e.createElement(t.Text,null,d.Price),e.createElement(t.BlockStack,null,e.createElement(t.Text,{tone:"subdued"},d.AmountPerInterval.replace("{{ amount }}",L).replace("{{ interval }}",T)),x&&!z&&e.createElement(t.Text,{tone:"success"},d.DiscountAmount.replace("{{ amount }}",b)),x&&z&&e.createElement(t.Text,{tone:"subdued",textDecorationLine:"line-through"},d.DiscountAmountExpired.replace("{{ amount }}",b)))),p.usageCharges.length>0&&e.createElement(t.BlockStack,null,e.createElement(t.Text,null,d.UsageCharges||"Usage charges"),p.usageCharges.map((W,S)=>e.createElement(t.Text,{key:`usage-charge-${S}`,tone:"subdued"},W.terms)))),e.createElement(t.InlineStack,{align:"end"},e.createElement(t.ButtonGroup,null,e.createElement(t.Button,{onClick:()=>{u?u():k(!0)},accessibilityLabel:d.CancelPlan,tone:"critical"},d.CancelPlan),e.createElement(t.Button,{variant:"primary",onClick:i,accessibilityLabel:d.ChangePlan},d.ChangePlan))))),$&&e.createElement(t.Modal,{open:!0,onClose:()=>k(!1),title:d.CancelPlan,primaryAction:{content:d.CancelPlan,destructive:!0,loading:w,disabled:w,onAction:async()=>{B(!0),await E(),await P(),B(!1),k(!1),g()}},secondaryActions:[{content:d.Back,disabled:w,onAction:()=>k(!1)}]},e.createElement(t.Modal.Section,null,d.CancelConfirmation)))},Le=({backUrl:n="",pageWidth:i="narrow"})=>{const u=()=>{console.log("Show plans. Navigate to the plans page, open a modal, etc.")};return e.createElement(t.Page,{title:m.Subscription,backAction:n?{content:m.Back,url:n}:void 0,fullWidth:i==="full",narrowWidth:i==="narrow"},e.createElement(t.BlockStack,{gap:"400"},e.createElement(ie,{onShowPlans:u}),e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(ie,{onShowPlans:u})),e.createElement(t.Layout.Section,{variant:"oneThird"},e.createElement(ie,{onShowPlans:u,orientation:"vertical"})))))};exports.HighlightedPlanCards=we;exports.HorizontalPlanCard=he;exports.HorizontalPlanCards=De;exports.PlanCardStack=re;exports.PlanCardType=G;exports.PlanFeaturesSection=ge;exports.PlanPricingSection=me;exports.PlanTitleSection=de;exports.SubscriptionSummaryPage=Le;exports.VerticalPlanCards=Te;
