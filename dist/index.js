"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("react"),t=require("@shopify/polaris");var de=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function me(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ge={exports:{}};(function(n,c){(function(i,u){n.exports=u()})(de,function(){var i=1e3,u=6e4,p=36e5,h="millisecond",E="second",P="minute",b="hour",x="day",A="week",C="month",D="quarter",M="year",m="date",d="Invalid Date",B=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,F={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(s){var l=["th","st","nd","rd"],r=s%100;return"["+s+(l[(r-20)%10]||l[r]||l[0])+"]"}},w=function(s,l,r){var g=String(s);return!g||g.length>=l?s:""+Array(l+1-g.length).join(r)+s},S={s:w,z:function(s){var l=-s.utcOffset(),r=Math.abs(l),g=Math.floor(r/60),o=r%60;return(l<=0?"+":"-")+w(g,2,"0")+":"+w(o,2,"0")},m:function s(l,r){if(l.date()<r.date())return-s(r,l);var g=12*(r.year()-l.year())+(r.month()-l.month()),o=l.clone().add(g,C),y=r-o<0,f=l.clone().add(g+(y?-1:1),C);return+(-(g+(r-o)/(y?o-f:f-o))||0)},a:function(s){return s<0?Math.ceil(s)||0:Math.floor(s)},p:function(s){return{M:C,y:M,w:A,d:x,D:m,h:b,m:P,s:E,ms:h,Q:D}[s]||String(s||"").toLowerCase().replace(/s$/,"")},u:function(s){return s===void 0}},_="en",k={};k[_]=F;var K="$isDayjsObject",U=function(s){return s instanceof z||!(!s||!s[K])},G=function s(l,r,g){var o;if(!l)return _;if(typeof l=="string"){var y=l.toLowerCase();k[y]&&(o=y),r&&(k[y]=r,o=y);var f=l.split("-");if(!o&&f.length>1)return s(f[0])}else{var T=l.name;k[T]=l,o=T}return!g&&o&&(_=o),o||!g&&_},L=function(s,l){if(U(s))return s.clone();var r=typeof l=="object"?l:{};return r.date=s,r.args=arguments,new z(r)},a=S;a.l=G,a.i=U,a.w=function(s,l){return L(s,{locale:l.$L,utc:l.$u,x:l.$x,$offset:l.$offset})};var z=function(){function s(r){this.$L=G(r.locale,null,!0),this.parse(r),this.$x=this.$x||r.x||{},this[K]=!0}var l=s.prototype;return l.parse=function(r){this.$d=function(g){var o=g.date,y=g.utc;if(o===null)return new Date(NaN);if(a.u(o))return new Date;if(o instanceof Date)return new Date(o);if(typeof o=="string"&&!/Z$/i.test(o)){var f=o.match(B);if(f){var T=f[2]-1||0,I=(f[7]||"0").substring(0,3);return y?new Date(Date.UTC(f[1],T,f[3]||1,f[4]||0,f[5]||0,f[6]||0,I)):new Date(f[1],T,f[3]||1,f[4]||0,f[5]||0,f[6]||0,I)}}return new Date(o)}(r),this.init()},l.init=function(){var r=this.$d;this.$y=r.getFullYear(),this.$M=r.getMonth(),this.$D=r.getDate(),this.$W=r.getDay(),this.$H=r.getHours(),this.$m=r.getMinutes(),this.$s=r.getSeconds(),this.$ms=r.getMilliseconds()},l.$utils=function(){return a},l.isValid=function(){return this.$d.toString()!==d},l.isSame=function(r,g){var o=L(r);return this.startOf(g)<=o&&o<=this.endOf(g)},l.isAfter=function(r,g){return L(r)<this.startOf(g)},l.isBefore=function(r,g){return this.endOf(g)<L(r)},l.$g=function(r,g,o){return a.u(r)?this[g]:this.set(o,r)},l.unix=function(){return Math.floor(this.valueOf()/1e3)},l.valueOf=function(){return this.$d.getTime()},l.startOf=function(r,g){var o=this,y=!!a.u(g)||g,f=a.p(r),T=function(J,N){var Z=a.w(o.$u?Date.UTC(o.$y,N,J):new Date(o.$y,N,J),o);return y?Z:Z.endOf(x)},I=function(J,N){return a.w(o.toDate()[J].apply(o.toDate("s"),(y?[0,0,0,0]:[23,59,59,999]).slice(N)),o)},O=this.$W,W=this.$M,j=this.$D,Q="set"+(this.$u?"UTC":"");switch(f){case M:return y?T(1,0):T(31,11);case C:return y?T(1,W):T(0,W+1);case A:var X=this.$locale().weekStart||0,te=(O<X?O+7:O)-X;return T(y?j-te:j+(6-te),W);case x:case m:return I(Q+"Hours",0);case b:return I(Q+"Minutes",1);case P:return I(Q+"Seconds",2);case E:return I(Q+"Milliseconds",3);default:return this.clone()}},l.endOf=function(r){return this.startOf(r,!1)},l.$set=function(r,g){var o,y=a.p(r),f="set"+(this.$u?"UTC":""),T=(o={},o[x]=f+"Date",o[m]=f+"Date",o[C]=f+"Month",o[M]=f+"FullYear",o[b]=f+"Hours",o[P]=f+"Minutes",o[E]=f+"Seconds",o[h]=f+"Milliseconds",o)[y],I=y===x?this.$D+(g-this.$W):g;if(y===C||y===M){var O=this.clone().set(m,1);O.$d[T](I),O.init(),this.$d=O.set(m,Math.min(this.$D,O.daysInMonth())).$d}else T&&this.$d[T](I);return this.init(),this},l.set=function(r,g){return this.clone().$set(r,g)},l.get=function(r){return this[a.p(r)]()},l.add=function(r,g){var o,y=this;r=Number(r);var f=a.p(g),T=function(W){var j=L(y);return a.w(j.date(j.date()+Math.round(W*r)),y)};if(f===C)return this.set(C,this.$M+r);if(f===M)return this.set(M,this.$y+r);if(f===x)return T(1);if(f===A)return T(7);var I=(o={},o[P]=u,o[b]=p,o[E]=i,o)[f]||1,O=this.$d.getTime()+r*I;return a.w(O,this)},l.subtract=function(r,g){return this.add(-1*r,g)},l.format=function(r){var g=this,o=this.$locale();if(!this.isValid())return o.invalidDate||d;var y=r||"YYYY-MM-DDTHH:mm:ssZ",f=a.z(this),T=this.$H,I=this.$m,O=this.$M,W=o.weekdays,j=o.months,Q=o.meridiem,X=function(N,Z,ne,le){return N&&(N[Z]||N(g,y))||ne[Z].slice(0,le)},te=function(N){return a.s(T%12||12,N,"0")},J=Q||function(N,Z,ne){var le=N<12?"AM":"PM";return ne?le.toLowerCase():le};return y.replace(Y,function(N,Z){return Z||function(ne){switch(ne){case"YY":return String(g.$y).slice(-2);case"YYYY":return a.s(g.$y,4,"0");case"M":return O+1;case"MM":return a.s(O+1,2,"0");case"MMM":return X(o.monthsShort,O,j,3);case"MMMM":return X(j,O);case"D":return g.$D;case"DD":return a.s(g.$D,2,"0");case"d":return String(g.$W);case"dd":return X(o.weekdaysMin,g.$W,W,2);case"ddd":return X(o.weekdaysShort,g.$W,W,3);case"dddd":return W[g.$W];case"H":return String(T);case"HH":return a.s(T,2,"0");case"h":return te(1);case"hh":return te(2);case"a":return J(T,I,!0);case"A":return J(T,I,!1);case"m":return String(I);case"mm":return a.s(I,2,"0");case"s":return String(g.$s);case"ss":return a.s(g.$s,2,"0");case"SSS":return a.s(g.$ms,3,"0");case"Z":return f}return null}(N)||f.replace(":","")})},l.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},l.diff=function(r,g,o){var y,f=this,T=a.p(g),I=L(r),O=(I.utcOffset()-this.utcOffset())*u,W=this-I,j=function(){return a.m(f,I)};switch(T){case M:y=j()/12;break;case C:y=j();break;case D:y=j()/3;break;case A:y=(W-O)/6048e5;break;case x:y=(W-O)/864e5;break;case b:y=W/p;break;case P:y=W/u;break;case E:y=W/i;break;default:y=W}return o?y:a.a(y)},l.daysInMonth=function(){return this.endOf(C).$D},l.$locale=function(){return k[this.$L]},l.locale=function(r,g){if(!r)return this.$L;var o=this.clone(),y=G(r,g,!0);return y&&(o.$L=y),o},l.clone=function(){return a.w(this.$d,this)},l.toDate=function(){return new Date(this.valueOf())},l.toJSON=function(){return this.isValid()?this.toISOString():null},l.toISOString=function(){return this.$d.toISOString()},l.toString=function(){return this.$d.toUTCString()},s}(),H=z.prototype;return L.prototype=H,[["$ms",h],["$s",E],["$m",P],["$H",b],["$W",x],["$M",C],["$y",M],["$D",m]].forEach(function(s){H[s[1]]=function(l){return this.$g(l,s[0],s[1])}}),L.extend=function(s,l){return s.$i||(s(l,z,L),s.$i=!0),L},L.locale=G,L.isDayjs=U,L.unix=function(s){return L(1e3*s)},L.en=k[_],L.Ls=k,L.p={},L})})(ge);var fe=ge.exports;const ce=me(fe),$={Annual:"ANNUAL",Every30Days:"EVERY_30_DAYS"},ae={Public:"public",CustomerTag:"customerTag",ShopifyPlan:"shopifyPlan",Customer:"customer",Hidden:"hidden"},v={AmountPerInterval:"{{ amount }} per {{ interval }}",Back:"Back",Cancel:"Cancel",CancelConfirmation:"Are you sure you want to cancel your subscription?",CancelPlan:"Cancel plan",ChangePlan:"Change plan",CurrentPlan:"Current plan",CustomPlans:"Custom plans",CustomPlansDescription:"Plans tailored to your specific needs",DiscountAmount:"{{ amount }} discount",DiscountAmountExpired:"{{ amount }} discount expired",FreeTrialLength:"{{ trialDays }}-day free trial",Features:"Features",Month:"month",MonthShort:"mo",Monthly:"Monthly",NextBillingDate:"Next billing date",NotSubscribed:"You're not subscribed to a plan yet.",Year:"year",YearShort:"yr",Yearly:"Yearly",MostPopular:"Most popular",Per:"/",Plans:"Plans",Price:"Price",SelectPlan:"Select plan",SubscribeSuccessTitle:"Subscription successful",SubscribeSuccessBody:"Thanks for subscribing to our app!",Subscription:"Subscription",SubscriptionCancelled:"Subscription cancelled",UsageCharges:"Usage charges"},ve=e.createContext(),Se=()=>{const n=e.useContext(ve);if(n===void 0)throw new Error("useMantle must be used within a MantleProvider");return n},be=(n="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:n,notation:"standard"}),V=(n,c="USD",i=!0)=>{let u=be(c).format(n);return i&&(u=u.replace(/\.00$/,"")),u},pe=(n=$.Every30Days)=>{switch(n){case $.Annual:return"year";case $.Every30Days:default:return"month"}},ke=(n=$.Every30Days)=>{switch(n){case $.Annual:return"yr";case $.Every30Days:default:return"mo"}},ee=({interval:n=$.Every30Days,useShortFormPlanIntervals:c=!0})=>c?ke(n):pe(n),se=({plan:n,customFieldKey:c="recommended"})=>{var i;return!!((i=n.customFields)!=null&&i[c])},ue=({plan:n,customFieldKey:c="buttonLabel"})=>{var i;return((i=n.customFields)==null?void 0:i[c])||v.SelectPlan},xe=({plan:n})=>{var c;return((c=n.discounts)==null?void 0:c.length)>0?n.discounts.reduce((i,u)=>i.discountedAmount<u.discountedAmount?i:u):void 0},Ce=(n=4)=>n%4===0?{xs:6,sm:6,md:2,lg:3,xl:3}:n%3===0?{xs:6,sm:6,md:2,lg:4,xl:4}:n%2===0?{xs:6,sm:6,md:3,lg:6,xl:6}:n===1?{xs:6,sm:6,md:6,lg:12,xl:12}:{xs:6,sm:6,md:2,lg:4,xl:4},Be=(n=4)=>n%4===0?4:n%3===0?3:n%2===0?2:n===1?1:4,$e=({orientation:n="horizontal",onShowPlans:c,onCancelPlan:i,onPlanCancelled:u=()=>{},cancelSubscription:p=async()=>{},i18n:h,subscription:E,refetch:P=async()=>{},apps:b=[]})=>e.createElement(t.Banner,{title:"Bundle and save!",tone:"success"},e.createElement(t.BlockStack,{gap:"400"},e.createElement(t.Text,null,"Save money on your subscription when you install these great apps."),e.createElement(t.BlockStack,{gap:"300"},b.map((x,A)=>e.createElement(t.BlockStack,{gap:"300"},e.createElement(t.InlineStack,{gap:"200",align:"space-between",blockAlign:"center"},e.createElement(t.InlineStack,{gap:"300"},e.createElement(t.Thumbnail,{source:x.iconUrl,alt:x.name,size:"small"}),e.createElement(t.BlockStack,null,e.createElement(t.Text,{variant:"headingSm"},x.name),e.createElement(t.Text,null,x.description))),e.createElement(t.InlineStack,{gap:"400"},e.createElement(t.Text,{tone:"subdued"},"20% off"),e.createElement(t.BlockStack,null,e.createElement(t.Button,null,h.Install)))),A<b.length-1&&e.createElement(t.Divider,null))))));var q=function(c){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},c),e.createElement("path",{fillRule:"evenodd",d:"M15.78 5.97a.75.75 0 0 1 0 1.06l-6.5 6.5a.75.75 0 0 1-1.06 0l-3.25-3.25a.75.75 0 1 1 1.06-1.06l2.72 2.72 5.97-5.97a.75.75 0 0 1 1.06 0Z"}))};q.displayName="CheckIcon";var ie=function(c){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},c),e.createElement("path",{d:"M10.75 6.75a.75.75 0 0 0-1.5 0v2.5h-2.5a.75.75 0 0 0 0 1.5h2.5v2.5a.75.75 0 0 0 1.5 0v-2.5h2.5a.75.75 0 0 0 0-1.5h-2.5v-2.5Z"}))};ie.displayName="PlusIcon";const De=({plan:n,t:c,translatePlanName:i})=>e.createElement(t.BlockStack,{gap:"100"},e.createElement(t.Text,{variant:"headingMd",alignment:"center"},i?c(n.name):n.name),n.description&&e.createElement(t.Text,{variant:"bodyLg",tone:"subdued",alignment:"center"},c(n.description))),Me=({plan:n,discount:c,t:i,useShortFormPlanIntervals:u=!0})=>e.createElement(t.BlockStack,{gap:"100"},!!c&&e.createElement(t.InlineStack,{align:"center",blockAlign:"center",gap:"200"},e.createElement(t.Text,{variant:"heading3xl"},V(c.discountedAmount,n.currency,!0)),e.createElement(t.Text,{variant:"heading3xl",tone:"subdued",fontWeight:"medium",textDecorationLine:"line-through"},V(n.amount,n.currency,!0)),e.createElement(t.Text,{variant:"bodyLg",tone:"subdued"},i(v.Per)," ",i(ee({interval:n.interval,useShortFormPlanIntervals:u})))),!c&&e.createElement(t.InlineStack,{align:"center",blockAlign:"center",gap:"200"},e.createElement(t.Text,{alignment:"center",variant:"heading3xl"},V(n.amount,n.currency,!0)),e.createElement(t.Text,{alignment:"center",variant:"bodyLg",tone:"subdued"},i(v.Per)," ",i(ee({interval:n.interval,useShortFormPlanIntervals:u})))),n.usageCharges.length>0&&e.createElement(t.BlockStack,null,n.usageCharges.map((p,h)=>e.createElement(t.InlineStack,{key:`plan-usageCharge-${h}`,align:"center",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:ie,tone:"positive"})),e.createElement(t.Text,{variant:"bodyLg"},i(p.terms)))))),we=({plan:n,t:c,trialDaysAsFeature:i=!1})=>e.createElement(t.BlockStack,{gap:"300"},i&&n.trialDays&&n.trialDays>0?e.createElement(t.InlineStack,{align:"center",blockAlign:"center",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:q,tone:"positive"})),e.createElement(t.Text,{tone:"subdued"},c(v.FreeTrialLength).replace("{{ trialDays }}",n.trialDays))):null,n.featuresOrder.map((u,p)=>{const h=n.features[u];if(h.type!=="boolean"||h.value===!0)return e.createElement(t.InlineStack,{key:`plan-feature-${p}`,align:"center",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:q,tone:"positive"})),h.type==="boolean"?e.createElement(t.Text,{tone:"subdued"},c(h.name)):e.createElement(t.Text,{tone:"subdued"},h.value," ",c(h.name)))})),he=({plan:n,discount:c,buttonLabel:i,onSelectPlan:u,useShortFormPlanIntervals:p=!0,trialDaysAsFeature:h=!1,expanded:E=!1,isActivePlan:P=!1,isRecommendedPlan:b=!1,isCustomPlan:x=!1,showRecommendedPlanBadge:A=!0,t:C,translatePlanName:D=!0})=>{const[M,m]=e.useState(!1),d=C||(Y=>Y),B=async({plan:Y,discount:F})=>{u?(m(!0),await u({plan:Y,discount:F})!==!0&&m(!1)):console.log("No onSelectPlan callback provided")};return e.createElement(t.Box,{position:"relative",minHeight:"100%"},e.createElement(t.Box,{paddingBlock:E||b?void 0:"800",minHeight:"100%"},e.createElement(t.Box,{background:b||x?"bg-surface":"bg-surface-secondary",borderStyle:"solid",borderColor:"border",borderWidth:"025",paddingBlock:E||b?"1600":"800",paddingInline:"400",borderRadius:"200",minHeight:"calc(100% - calc(var(--p-space-800) * 2))"},e.createElement(t.BlockStack,{gap:"800"},e.createElement(t.BlockStack,{gap:"400"},e.createElement(De,{plan:n,t:d,translatePlanName:D}),e.createElement(Me,{plan:n,discount:c,useShortFormPlanIntervals:p,t:d})),e.createElement(t.Button,{size:"large",variant:b?"primary":"secondary",onClick:async()=>{await B({plan:n,discount:c})},disabled:P,loading:M},d(i||v.SelectPlan)),e.createElement(we,{plan:n,t:d,trialDaysAsFeature:h}),b&&A&&e.createElement(t.InlineStack,{align:"center",gap:"100"},e.createElement(t.Badge,{tone:"success"},d(v.MostPopular)))))))},R={Highlighted:"highlighted",Horizontal:"horizontal",Vertical:"vertical"},re=({plans:n,customer:c,onSelectPlan:i,planInterval:u,cardType:p=R.Horizontal,trialDaysAsFeature:h=!0,useShortFormPlanIntervals:E=!0,keyForRecommended:P="recommended",keyForCustomButtonLabel:b="buttonLabel",showRecommendedPlanBadge:x=!0,applyDiscount:A=!0,t:C,translatePlanName:D=!0})=>{var w;const M=(w=c==null?void 0:c.subscription)!=null&&w.active?c.subscription:void 0,m=M==null?void 0:M.plan,d=u?n.filter(S=>S.interval===u):n,B=p===R.Vertical?1:Be(d.length),Y=Ce(B),F=C||(S=>S);return e.createElement(t.Grid,{columns:B},d.map(S=>{const _=A?xe({plan:S}):void 0,k=(m==null?void 0:m.id)===S.id&&!(M!=null&&M.cancelOn);return e.createElement(t.Grid.Cell,{columnSpan:Y,key:S.id},p===R.Highlighted&&e.createElement(he,{key:`HighlightedPlanCard-${S.id}`,plan:S,discount:_,onSelectPlan:i,isActivePlan:k,trialDaysAsFeature:h,useShortFormPlanIntervals:E,isCustomPlan:S.availability!==ae.Public,isRecommendedPlan:se({plan:S,customFieldKey:P}),buttonLabel:ue({plan:S,customFieldKey:b}),showRecommendedPlanBadge:x,t:F,translatePlanName:D}),p===R.Horizontal&&e.createElement(Ee,{key:`HorizontalPlanCard-${S.id}`,plan:S,discount:_,onSelectPlan:i,isActivePlan:k,trialDaysAsFeature:h,useShortFormPlanIntervals:E,isRecommendedPlan:se({plan:S,customFieldKey:P}),buttonLabel:ue({plan:S,customFieldKey:b}),showRecommendedPlanBadge:x,t:F,translatePlanName:D}))}))},Pe=({customer:n,plans:c,onSubscribe:i,backUrl:u="",showRecommendedBadge:p=!0,customFieldCta:h,customFieldPlanRecommended:E="Recommended",showPlanIntervalToggle:P=!0,showTrialDaysAsFeature:b=!0,useShortFormPlanIntervals:x,pageWidth:A="default",showCustomPlans:C=!0})=>{const D=n==null?void 0:n.subscription,M=new URLSearchParams(window.location.search),m=c.some(k=>k.interval===$.Annual)&&c.some(k=>k.interval===$.Every30Days),d=c.find(k=>k.id===(D==null?void 0:D.plan.id)),[B,Y]=e.useState(d?d.interval:m?$.Annual:$.Every30Days),F=c.filter(k=>k.availability===ae.Public),w=C?c.filter(k=>k.availability!==ae.Public):[],[S,_]=e.useState(M.get("subscribed")==="true");return e.createElement(t.Page,{title:v.Plans,backAction:u?{content:v.Back,url:u}:void 0,secondaryActions:P&&m?e.createElement(t.ButtonGroup,{variant:"segmented"},e.createElement(t.Button,{pressed:B===$.Every30Days,onClick:()=>Y($.Every30Days)},v.Monthly),e.createElement(t.Button,{pressed:B===$.Annual,onClick:()=>Y($.Annual)},v.Yearly)):void 0,fullWidth:A==="full",narrowWidth:A==="narrow"},e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(t.BlockStack,{gap:"1000"},S&&e.createElement(t.Banner,{tone:"success",title:v.SubscribeSuccessTitle,onDismiss:()=>{_(!1),window.history.replaceState({},document.title,window.location.pathname)}},v.SubscribeSuccessBody),e.createElement(re,{plans:F,onSelectPlan:i,planInterval:B,cardType:R.Horizontal,keyForRecommended:E,keyForCustomButtonLabel:h,trialDaysAsFeature:b,useShortFormPlanIntervals:x,showRecommendedPlanBadge:p}),(w==null?void 0:w.length)>0&&e.createElement(t.Divider,{borderColor:"border"}),(w==null?void 0:w.length)>0&&e.createElement(t.BlockStack,{gap:"300"},e.createElement(t.Box,{paddingInline:{xs:400,sm:0}},e.createElement(t.Text,{variant:"headingMd"},v.CustomPlans)),e.createElement(re,{plans:w,onSelectPlan:i,planInterval:B,cardType:R.Horizontal,keyForRecommended:E,keyForCustomButtonLabel:h,trialDaysAsFeature:b,useShortFormPlanIntervals:x,showRecommendedPlanBadge:p}))))))},Te=({plan:n,t:c,translatePlanName:i,isRecommendedPlan:u=!1})=>e.createElement(t.BlockStack,null,e.createElement(t.InlineStack,{align:"space-between",gap:"100"},e.createElement(t.Text,{variant:"bodyLg"},i?c(n.name):n.name),u&&e.createElement(t.Badge,{tone:"success"},c(v.MostPopular))),n.description&&e.createElement(t.Text,{tone:"subdued"},c(n.description))),Ae=({plan:n,discount:c,t:i,useShortFormPlanIntervals:u=!0})=>e.createElement(t.BlockStack,{gap:"100"},!!c&&e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{variant:"headingXl"},V(c.discountedAmount,n.currency)),e.createElement(t.Text,{variant:"headingXl",tone:"subdued",fontWeight:"medium",textDecorationLine:"line-through"},n.amount),e.createElement(t.Text,{variant:"bodyLg",tone:"subdued"},i(v.Per)," ",i(ee({interval:n.interval,useShortFormPlanIntervals:u})))),!c&&e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{alignment:"center",variant:"headingXl"},V(n.amount,n.currency)),e.createElement(t.Text,{alignment:"center",variant:"bodyLg",tone:"subdued"},i(v.Per)," ",i(ee({interval:n.interval,useShortFormPlanIntervals:u})))),n.usageCharges&&n.usageCharges.length>0&&e.createElement(t.BlockStack,null,n.usageCharges.map((p,h)=>e.createElement(t.InlineStack,{key:`plan-usageCharge-${h}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:ie,tone:"positive"})),e.createElement(t.Text,{variant:"bodyLg"},i(p.terms)))))),Le=({plan:n,t:c,trialDaysAsFeature:i=!1})=>e.createElement(t.BlockStack,{gap:"100"},i&&n.trialDays&&n.trialDays>0?e.createElement(t.InlineStack,{align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:q,tone:"positive"})),e.createElement(t.Text,{tone:"subdued"},c(v.FreeTrialLength).replace("{{ trialDays }}",n.trialDays))):null,n.featuresOrder.map((u,p)=>{const h=n.features[u];if(h.type!=="boolean"||h.value===!0)return e.createElement(t.InlineStack,{key:`plan-feature-${p}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:q,tone:"positive"})),h.type==="boolean"?e.createElement(t.Text,{tone:"subdued"},c(h.name)):e.createElement(t.Text,{tone:"subdued"},h.value," ",c(h.name)))})),Ee=({plan:n,discount:c,buttonLabel:i,onSelectPlan:u,useShortFormPlanIntervals:p=!0,trialDaysAsFeature:h=!1,isRecommendedPlan:E=!1,isActivePlan:P=!1,t:b,translatePlanName:x=!0})=>{const[A,C]=e.useState(!1),D=b||(m=>m),M=async({plan:m,discount:d})=>{u?(C(!0),await u({plan:m,discount:d})!==!0&&C(!1)):console.log("No onSelectPlan callback provided")};return e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"400"},e.createElement(Te,{plan:n,isRecommendedPlan:E,t:D,translatePlanName:x}),e.createElement(Ae,{plan:n,discount:c,useShortFormPlanIntervals:p,t:D}),e.createElement(t.Button,{size:"large",variant:E?"primary":"secondary",onClick:async()=>{await M({plan:n,discount:c})},disabled:P,loading:A},D(P?v.CurrentPlan:i||v.SelectPlan)),e.createElement(Le,{plan:n,trialDaysAsFeature:h,t:D})))},Ie=({customer:n,plans:c,onSubscribe:i,backUrl:u="",showRecommendedBadge:p=!0,customFieldCta:h=null,customFieldPlanRecommended:E="Recommended",showPlanIntervalToggle:P=!0,showTrialDaysAsFeature:b=!0,useShortFormPlanIntervals:x=!0,pageWidth:A="default",showCustomPlans:C=!0})=>{const D=n==null?void 0:n.subscription,M=new URLSearchParams(window.location.search),m=c.some(k=>k.interval===$.Annual)&&c.some(k=>k.interval===$.Every30Days),d=c.find(k=>k.id===(D==null?void 0:D.plan.id)),[B,Y]=e.useState(d?d.interval:m?$.Annual:$.Every30Days),F=c.filter(k=>k.availability===ae.Public),w=C?c.filter(k=>k.availability!==ae.Public):[],[S,_]=e.useState(M.get("subscribed")==="true");return e.createElement(t.Page,{title:v.Plans,backAction:u&&u!==""?{content:v.Back,url:u}:void 0,secondaryActions:P&&m?e.createElement(t.ButtonGroup,{variant:"segmented"},e.createElement(t.Button,{pressed:B===$.Every30Days,onClick:()=>Y($.Every30Days)},v.Monthly),e.createElement(t.Button,{pressed:B===$.Annual,onClick:()=>Y($.Annual)},v.Yearly)):void 0,fullWidth:A==="full",narrowWidth:A==="narrow"},e.createElement(t.Box,{paddingBlockEnd:"800"},e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(t.BlockStack,{gap:"1000"},S&&e.createElement(t.Banner,{tone:"success",title:v.SubscribeSuccessTitle,onDismiss:()=>{_(!1),window.history.replaceState({},document.title,window.location.pathname)}},v.SubscribeSuccessBody),e.createElement(re,{plans:F,onSelectPlan:i,planInterval:B,cardType:R.Highlighted,keyForRecommended:E,keyForCustomButtonLabel:h,trialDaysAsFeature:b,useShortFormPlanIntervals:x,showRecommendedPlanBadge:p}),(w==null?void 0:w.length)>0&&e.createElement(t.Divider,{borderColor:"border"}),(w==null?void 0:w.length)>0&&e.createElement(t.BlockStack,{gap:"300"},e.createElement(t.Box,{paddingInline:{xs:400,sm:0}},e.createElement(t.Text,{variant:"headingMd"},v.CustomPlans)),e.createElement(re,{plans:w,onSelectPlan:i,planInterval:B,cardType:R.Highlighted,keyForRecommended:E,keyForCustomButtonLabel:h,trialDaysAsFeature:b,useShortFormPlanIntervals:x,showRecommendedPlanBadge:p})))))))},Ye=({customer:n,plans:c,onSubscribe:i,backUrl:u="",showRecommendedBadge:p=!0,customFieldCta:h=null,customFieldPlanRecommended:E="Recommended",showPlanIntervalToggle:P=!1,showTrialDaysAsFeature:b=!0,useShortFormPlanIntervals:x=!0,pageWidth:A="default",showCustomPlans:C=!0})=>{const D=n==null?void 0:n.subscription,M=new URLSearchParams(window.location.search),m=c.some(a=>a.interval===$.Annual)&&c.some(a=>a.interval===$.Every30Days),d=c.find(a=>a.id===(D==null?void 0:D.plan.id)),[B,Y]=e.useState(d?d.interval:m?$.Annual:$.Every30Days),F=c.filter(a=>a.availability!=="customerTag"&&a.availability!=="customer"),w=P&&m?F.filter(a=>a.interval===B):F,S=C?c.filter(a=>a.availability==="customerTag"||a.availability==="customer"):[],[_,k]=e.useState(M.get("subscribed")==="true"),K=({plan:a,discount:z})=>e.createElement(t.BlockStack,null,e.createElement(t.Text,{variant:"bodyLg"},a.name),a.description&&e.createElement(t.Text,{tone:"subdued"},a.description)),U=({plan:a,discount:z})=>e.createElement(t.BlockStack,{gap:"200"},e.createElement(t.Text,{fontWeight:"medium"},v.Features),e.createElement(t.BlockStack,{gap:"100"},b&&a.trialDays!==0&&e.createElement(t.InlineStack,{align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:q,tone:"positive"})),e.createElement(t.Text,{tone:"subdued"},v.FreeTrialLength.replace("{{ trialDays }}",a.trialDays))),a.featuresOrder.map((H,s)=>{const l=a.features[H];if(l.type!=="boolean"||l.value===!0)return e.createElement(t.InlineStack,{key:`plan-feature-${s}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:q,tone:"positive"})),l.type==="boolean"?e.createElement(t.Text,{tone:"subdued"},l.name):e.createElement(t.Text,{tone:"subdued"},l.value," ",l.name))}))),G=({plan:a,discount:z})=>e.createElement(t.BlockStack,{gap:"100"},z?e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{variant:"headingXl"},V(z.discountedAmount,a.currency)),e.createElement(t.Text,{variant:"headingXl",tone:"subdued",fontWeight:"medium",textDecorationLine:"line-through"},a.amount),e.createElement(t.Text,{variant:"bodyLg",tone:"subdued"},v.Per," ",ee({interval:a.interval,useShortFormPlanIntervals:x}))):e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{alignment:"center",variant:"headingXl"},V(a.amount,a.currency)),e.createElement(t.Text,{alignment:"center",variant:"bodyLg",tone:"subdued"},v.Per," ",ee({interval:a.interval,useShortFormPlanIntervals:x}))),a.usageCharges.length>0&&e.createElement(t.BlockStack,null,a.usageCharges.map((H,s)=>e.createElement(t.InlineStack,{key:`plan-usageCharge-${s}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:ie,tone:"positive"})),e.createElement(t.Text,{variant:"bodyLg"},H.terms))))),L=({plan:a,discount:z})=>{const H=h&&a.customFields[h],s=a.customFields&&a.customFields[E];return e.createElement(t.InlineStack,{blockAlign:"center",gap:"400"},e.createElement(t.Button,{size:"large",variant:s?"primary":"secondary",onClick:()=>i({planId:a.id,discountId:z==null?void 0:z.id}),disabled:(d==null?void 0:d.id)===a.id},(d==null?void 0:d.id)===a.id?v.CurrentPlan:H?a.customFields[h]:v.SelectPlan),s&&p&&e.createElement(t.Box,null,e.createElement(t.Badge,{tone:"success"},v.MostPopular)))};return e.createElement(t.Page,{title:v.Plans,backAction:u!==""?{content:v.Back,url:u}:void 0,secondaryActions:P&&m?e.createElement(t.ButtonGroup,{variant:"segmented"},e.createElement(t.Button,{pressed:B===$.Every30Days,onClick:()=>Y($.Every30Days)},v.Monthly),e.createElement(t.Button,{pressed:B===$.Annual,onClick:()=>Y($.Annual)},v.Year)):void 0,fullWidth:A==="full",narrowWidth:A==="narrow"},e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(t.BlockStack,{gap:"400"},_&&e.createElement(t.Banner,{tone:"success",title:v.SubscribeSuccessTitle,onDismiss:()=>{k(!1),window.history.replaceState({},document.title,window.location.pathname)}},v.SubscribeSuccessBody),w.map((a,z)=>{var s;const H=((s=a.discounts)==null?void 0:s.length)>0?a.discounts.reduce((l,r)=>l.discountedAmount<r.discountedAmount?l:r):null;return e.createElement(t.Card,{key:`plan-${z}`},e.createElement(t.Grid,null,e.createElement(t.Grid.Cell,{columnSpan:{xs:6,sm:6,md:3,lg:6,xl:12}},e.createElement(t.BlockStack,{gap:"400"},e.createElement(t.BlockStack,{gap:"200"},K({plan:a,discount:H}),G({plan:a,discount:H})),e.createElement(t.Box,null,L({plan:a,discount:H})))),e.createElement(t.Grid.Cell,{columnSpan:{xs:6,sm:6,md:3,lg:6,xl:12}},U({plan:a,discount:H}))))}),(S==null?void 0:S.length)>0&&e.createElement(t.Divider,{borderColor:"border"}),(S==null?void 0:S.length)>0&&e.createElement(t.BlockStack,{gap:"300"},e.createElement(t.Box,{paddingInline:{xs:400,sm:0}},e.createElement(t.Text,{variant:"headingMd"},v.CustomPlans)),e.createElement(t.Grid,null,S.map((a,z)=>{var s;const H=((s=a.discounts)==null?void 0:s.length)>0?a.discounts.reduce((l,r)=>l.discountedAmount<r.discountedAmount?l:r):null;return e.createElement(t.Grid.Cell,{key:`custom-plan-${z}`,columnSpan:columnSpan()},e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"400"},K({plan:a,discount:H}),G({plan:a,discount:H}),L({plan:a,discount:H}),U({plan:a,discount:H}))))})))))))};var ye={exports:{}};(function(n,c){(function(i,u){n.exports=u()})(de,function(){var i={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(u,p,h){var E=p.prototype,P=E.format;h.en.formats=i,E.format=function(b){b===void 0&&(b="YYYY-MM-DDTHH:mm:ssZ");var x=this.$locale().formats,A=function(C,D){return C.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(M,m,d){var B=d&&d.toUpperCase();return m||D[d]||i[d]||D[B].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(Y,F,w){return F||w.slice(1)})})}(b,x===void 0?{}:x);return P.call(this,A)}}})})(ye);var He=ye.exports;const Oe=me(He);ce.extend(Oe);const oe=({orientation:n="horizontal",onShowPlans:c,onCancelPlan:i,onPlanCancelled:u=()=>{},cancelSubscription:p=async()=>{},i18n:h,subscription:E,refetch:P=async()=>{},t:b,translatePlanName:x=!0})=>{var U;const[A,C]=e.useState(!1),[D,M]=e.useState(!1),m=b||(G=>G),d={...v,...h||{}};if(!E)return e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"200"},e.createElement(t.Text,{variant:"headingMd"},m(d.Subscription)),e.createElement(t.Text,null,m(d.NotSubscribed)),e.createElement(t.InlineStack,{align:"end"},e.createElement(t.ButtonGroup,null,e.createElement(t.Button,{variant:"primary",onClick:c,accessibilityLabel:m(d.ChangePlan)},m(d.SelectPlan))))));const{plan:B}=E,Y=V(E.total,B.currency),F=m(B.interval===$.Annual?d.Year:d.Month),w=n==="horizontal"?t.InlineGrid:t.BlockStack,S=(U=E==null?void 0:E.appliedDiscount)==null?void 0:U.discount,_=S?S.percentage?`${S.percentage}%`:V(S.amount,B.currency):null,k=S&&E.appliedDiscount.discountEndsAt&&ce().isAfter(ce(E.appliedDiscount.discountEndsAt)),K=B.usageCharges.length>0?{xs:1,md:3}:{xs:1,md:2};return e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"200"},e.createElement(t.Text,{variant:"headingMd"},m(d.Subscription)),e.createElement(t.BlockStack,{gap:"400"},e.createElement(w,{columns:K,gap:"300"},e.createElement(t.BlockStack,null,e.createElement(t.Text,null,m(d.CurrentPlan)),e.createElement(t.Text,{tone:"subdued"},x?m(B.name):B.name),E.cancelOn&&e.createElement(t.Text,{tone:"subdued"},m("Canceled, active until {{ date }}").replace("{{ date }}",ce(E.cancelOn).format("LL")))),e.createElement(t.BlockStack,null,e.createElement(t.Text,null,m(d.Price)),e.createElement(t.BlockStack,null,e.createElement(t.Text,{tone:"subdued"},m(d.AmountPerInterval).replace("{{ amount }}",Y).replace("{{ interval }}",F)),S&&!k&&e.createElement(t.Text,{tone:"success"},m(d.DiscountAmount).replace("{{ amount }}",_)),S&&k&&e.createElement(t.Text,{tone:"subdued",textDecorationLine:"line-through"},m(d.DiscountAmountExpired).replace("{{ amount }}",_)))),B.usageCharges.length>0&&e.createElement(t.BlockStack,null,e.createElement(t.Text,null,m(d.UsageCharges||"Usage charges")),B.usageCharges.map((G,L)=>e.createElement(t.Text,{key:`usage-charge-${L}`,tone:"subdued"},m(G.terms))))),e.createElement(t.InlineStack,{align:"end"},e.createElement(t.ButtonGroup,null,e.createElement(t.Button,{onClick:()=>{i?i():C(!0)},accessibilityLabel:m(d.CancelPlan),tone:"critical",disabled:!!E.cancelOn},m(d.CancelPlan)),e.createElement(t.Button,{variant:"primary",onClick:c,accessibilityLabel:m(d.ChangePlan)},m(d.ChangePlan)))))),A&&e.createElement(t.Modal,{open:!0,onClose:()=>C(!1),title:m(d.CancelPlan),primaryAction:{content:m(d.CancelPlan),destructive:!0,loading:D,disabled:D,onAction:async()=>{M(!0),await p(),await P(),M(!1),C(!1),u()}},secondaryActions:[{content:m(d.Back),disabled:D,onAction:()=>C(!1)}]},e.createElement(t.Modal.Section,null,m(d.CancelConfirmation))))},Fe=({backUrl:n="",pageWidth:c="narrow"})=>{const{cancelSubscription:i,i18n:u,subscription:p,refetch:h}=Se(),E=()=>{console.log("Show plans. Navigate to the plans page, open a modal, etc.")};return e.createElement(t.Page,{title:u.Subscription,backAction:n?{content:u.Back,url:n}:void 0,fullWidth:c==="full",narrowWidth:c==="narrow"},e.createElement(t.BlockStack,{gap:"400"},e.createElement(oe,{onShowPlans:E,cancelSubscription:i,i18n:u,subscription:p,refetch:h}),e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(oe,{onShowPlans:E,cancelSubscription:i,i18n:u,subscription:p,refetch:h})),e.createElement(t.Layout.Section,{variant:"oneThird"},e.createElement(oe,{onShowPlans:E,cancelSubscription:i,i18n:u,subscription:p,refetch:h,orientation:"vertical"})))))};exports.BundleCard=$e;exports.HighlightedPlanCard=he;exports.HighlightedPlanCards=Ie;exports.HorizontalPlanCard=Ee;exports.HorizontalPlanCards=Pe;exports.PlanCardStack=re;exports.PlanCardType=R;exports.SubscriptionSummaryCard=oe;exports.SubscriptionSummaryPage=Fe;exports.VerticalPlanCards=Ye;
