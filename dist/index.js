"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("react"),t=require("@shopify/polaris"),k={Annual:"ANNUAL",Every30Days:"EVERY_30_DAYS"},ae={Public:"public",CustomerTag:"customerTag",ShopifyPlan:"shopifyPlan",Customer:"customer",Hidden:"hidden"},f={AmountPerInterval:"{{ amount }} per {{ interval }}",Back:"Back",Cancel:"Cancel",CancelConfirmation:"Are you sure you want to cancel your subscription?",CancelPlan:"Cancel plan",ChangePlan:"Change plan",CurrentPlan:"Current plan",CustomPlans:"Custom plans",CustomPlansDescription:"Plans tailored to your specific needs",DiscountAmount:"{{ amount }} discount",DiscountAmountExpired:"{{ amount }} discount expired",FreeTrialLength:"{{ trialDays }}-day free trial",Features:"Features",Month:"month",MonthShort:"mo",Monthly:"Monthly",NextBillingDate:"Next billing date",NotSubscribed:"You're not subscribed to a plan yet.",Year:"year",YearShort:"yr",Yearly:"Yearly",MostPopular:"Most popular",Per:"/",Plans:"Plans",Price:"Price",SelectPlan:"Select plan",SubscribeSuccessTitle:"Subscription successful",SubscribeSuccessBody:"Thanks for subscribing to our app!",Subscription:"Subscription",SubscriptionCancelled:"Subscription cancelled",UsageCharges:"Usage charges"},Ee=e.createContext(),fe=()=>{const n=e.useContext(Ee);if(n===void 0)throw new Error("useMantle must be used within a MantleProvider");return n},Se=(n="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:n,notation:"standard"}),V=(n,c="USD",s=!0)=>{let m=Se(c).format(n);return s&&(m=m.replace(/\.00$/,"")),m},ve=(n=k.Every30Days)=>{switch(n){case k.Annual:return"year";case k.Every30Days:default:return"month"}},be=(n=k.Every30Days)=>{switch(n){case k.Annual:return"yr";case k.Every30Days:default:return"mo"}},ee=({interval:n=k.Every30Days,useShortFormPlanIntervals:c=!0})=>c?be(n):ve(n),oe=({plan:n,customFieldKey:c="recommended"})=>{var s;return!!((s=n.customFields)!=null&&s[c])},se=({plan:n,customFieldKey:c="buttonLabel"})=>{var s;return((s=n.customFields)==null?void 0:s[c])||f.SelectPlan},pe=({plan:n})=>{var c;return((c=n.discounts)==null?void 0:c.length)>0?n.discounts.reduce((s,m)=>s.discountedAmount<m.discountedAmount?s:m):void 0},ke=(n=4)=>n%4===0?{xs:6,sm:6,md:2,lg:3,xl:3}:n%3===0?{xs:6,sm:6,md:2,lg:4,xl:4}:n%2===0?{xs:6,sm:6,md:3,lg:6,xl:6}:n===1?{xs:6,sm:6,md:6,lg:12,xl:12}:{xs:6,sm:6,md:2,lg:4,xl:4},xe=(n=4)=>n%4===0?4:n%3===0?3:n%2===0?2:n===1?1:4;var q=function(c){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},c),e.createElement("path",{fillRule:"evenodd",d:"M15.78 5.97a.75.75 0 0 1 0 1.06l-6.5 6.5a.75.75 0 0 1-1.06 0l-3.25-3.25a.75.75 0 1 1 1.06-1.06l2.72 2.72 5.97-5.97a.75.75 0 0 1 1.06 0Z"}))};q.displayName="CheckIcon";var ie=function(c){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},c),e.createElement("path",{d:"M10.75 6.75a.75.75 0 0 0-1.5 0v2.5h-2.5a.75.75 0 0 0 0 1.5h2.5v2.5a.75.75 0 0 0 1.5 0v-2.5h2.5a.75.75 0 0 0 0-1.5h-2.5v-2.5Z"}))};ie.displayName="PlusIcon";const Ce=({plan:n,t:c,translatePlanName:s})=>e.createElement(t.BlockStack,{gap:"100"},e.createElement(t.Text,{variant:"headingMd",alignment:"center"},s?c(n.name):n.name),n.description&&e.createElement(t.Text,{variant:"bodyLg",tone:"subdued",alignment:"center"},c(n.description))),$e=({plan:n,discount:c,t:s,useShortFormPlanIntervals:m=!0})=>e.createElement(t.BlockStack,{gap:"100"},!!c&&e.createElement(t.InlineStack,{align:"center",blockAlign:"center",gap:"200"},e.createElement(t.Text,{variant:"heading3xl"},V(c.discountedAmount,n.currency,!0)),e.createElement(t.Text,{variant:"heading3xl",tone:"subdued",fontWeight:"medium",textDecorationLine:"line-through"},V(n.amount,n.currency,!0)),e.createElement(t.Text,{variant:"bodyLg",tone:"subdued"},s(f.Per)," ",s(ee({interval:n.interval,useShortFormPlanIntervals:m})))),!c&&e.createElement(t.InlineStack,{align:"center",blockAlign:"center",gap:"200"},e.createElement(t.Text,{alignment:"center",variant:"heading3xl"},V(n.amount,n.currency,!0)),e.createElement(t.Text,{alignment:"center",variant:"bodyLg",tone:"subdued"},s(f.Per)," ",s(ee({interval:n.interval,useShortFormPlanIntervals:m})))),n.usageCharges.length>0&&e.createElement(t.BlockStack,null,n.usageCharges.map((b,h)=>e.createElement(t.InlineStack,{key:`plan-usageCharge-${h}`,align:"center",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:ie,tone:"positive"})),e.createElement(t.Text,{variant:"bodyLg"},s(b.terms)))))),Be=({plan:n,t:c,trialDaysAsFeature:s=!1})=>e.createElement(t.BlockStack,{gap:"300"},s&&n.trialDays&&n.trialDays>0?e.createElement(t.InlineStack,{align:"center",blockAlign:"center",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:q,tone:"positive"})),e.createElement(t.Text,{tone:"subdued"},c(f.FreeTrialLength).replace("{{ trialDays }}",n.trialDays))):null,n.featuresOrder.map((m,b)=>{const h=n.features[m];if(h.type!=="boolean"||h.value===!0)return e.createElement(t.InlineStack,{key:`plan-feature-${b}`,align:"center",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:q,tone:"positive"})),h.type==="boolean"?e.createElement(t.Text,{tone:"subdued"},c(h.name)):e.createElement(t.Text,{tone:"subdued"},h.value," ",c(h.name)))})),Pe=({plan:n,discount:c,buttonLabel:s,onSelectPlan:m,useShortFormPlanIntervals:b=!0,trialDaysAsFeature:h=!1,expanded:v=!1,isActivePlan:M=!1,isRecommendedPlan:C=!1,isCustomPlan:w=!1,showRecommendedPlanBadge:I=!0,t:x,translatePlanName:B=!0})=>{const[T,u]=e.useState(!1),g=x||(H=>H),$=async({plan:H,discount:W})=>{m?(u(!0),await m({plan:H,discount:W})!==!0&&u(!1)):console.log("No onSelectPlan callback provided")};return e.createElement(t.Box,{position:"relative",minHeight:"100%"},e.createElement(t.Box,{paddingBlock:v||C?void 0:"800",minHeight:"100%"},e.createElement(t.Box,{background:C||w?"bg-surface":"bg-surface-secondary",borderStyle:"solid",borderColor:"border",borderWidth:"025",paddingBlock:v||C?"1600":"800",paddingInline:"400",borderRadius:"200",minHeight:"calc(100% - calc(var(--p-space-800) * 2))"},e.createElement(t.BlockStack,{gap:"800"},e.createElement(t.BlockStack,{gap:"400"},e.createElement(Ce,{plan:n,t:g,translatePlanName:B}),e.createElement($e,{plan:n,discount:c,useShortFormPlanIntervals:b,t:g})),e.createElement(t.Button,{size:"large",variant:C?"primary":"secondary",onClick:async()=>{await $({plan:n,discount:c})},disabled:M,loading:T},g(s||f.SelectPlan)),e.createElement(Be,{plan:n,t:g,trialDaysAsFeature:h}),C&&I&&e.createElement(t.InlineStack,{align:"center",gap:"100"},e.createElement(t.Badge,{tone:"success"},g(f.MostPopular)))))))},R={Highlighted:"highlighted",Horizontal:"horizontal",Vertical:"vertical"},re=({plans:n,customer:c,onSelectPlan:s,planInterval:m,cardType:b=R.Horizontal,trialDaysAsFeature:h=!0,useShortFormPlanIntervals:v=!0,keyForRecommended:M="recommended",keyForCustomButtonLabel:C="buttonLabel",showRecommendedPlanBadge:w=!0,applyDiscount:I=!0,t:x,translatePlanName:B=!0})=>{var P;const T=(P=c==null?void 0:c.subscription)!=null&&P.active?c.subscription:void 0,u=T==null?void 0:T.plan,g=m?n.filter(S=>S.interval===m):n,$=b===R.Vertical?1:xe(g.length),H=ke($),W=x||(S=>S);return e.createElement(t.Grid,{columns:$},g.map(S=>{const Y=I?pe({plan:S}):void 0;return e.createElement(t.Grid.Cell,{columnSpan:H,key:S.id},b===R.Highlighted&&e.createElement(Pe,{key:`HighlightedPlanCard-${S.id}`,plan:S,discount:Y,onSelectPlan:s,isActivePlan:(u==null?void 0:u.id)===S.id,trialDaysAsFeature:h,useShortFormPlanIntervals:v,isCustomPlan:S.availability!==ae.Public,isRecommendedPlan:oe({plan:S,customFieldKey:M}),buttonLabel:se({plan:S,customFieldKey:C}),showRecommendedPlanBadge:w,t:W,translatePlanName:B}),b===R.Horizontal&&e.createElement(he,{key:`HorizontalPlanCard-${S.id}`,plan:S,discount:Y,onSelectPlan:s,isActivePlan:(u==null?void 0:u.id)===S.id,trialDaysAsFeature:h,useShortFormPlanIntervals:v,isRecommendedPlan:oe({plan:S,customFieldKey:M}),buttonLabel:se({plan:S,customFieldKey:C}),showRecommendedPlanBadge:w,t:W,translatePlanName:B}))}))},we=({customer:n,plans:c,onSubscribe:s,backUrl:m="",showRecommendedBadge:b=!0,customFieldCta:h,customFieldPlanRecommended:v="Recommended",showPlanIntervalToggle:M=!0,showTrialDaysAsFeature:C=!0,useShortFormPlanIntervals:w,pageWidth:I="default",showCustomPlans:x=!0})=>{const B=n==null?void 0:n.subscription,T=new URLSearchParams(window.location.search),u=c.some(p=>p.interval===k.Annual)&&c.some(p=>p.interval===k.Every30Days),g=c.find(p=>p.id===(B==null?void 0:B.plan.id)),[$,H]=e.useState(g?g.interval:u?k.Annual:k.Every30Days),W=c.filter(p=>p.availability===ae.Public),P=x?c.filter(p=>p.availability!==ae.Public):[],[S,Y]=e.useState(T.get("subscribed")==="true");return e.createElement(t.Page,{title:f.Plans,backAction:m?{content:f.Back,url:m}:void 0,secondaryActions:M&&u?e.createElement(t.ButtonGroup,{variant:"segmented"},e.createElement(t.Button,{pressed:$===k.Every30Days,onClick:()=>H(k.Every30Days)},f.Monthly),e.createElement(t.Button,{pressed:$===k.Annual,onClick:()=>H(k.Annual)},f.Yearly)):void 0,fullWidth:I==="full",narrowWidth:I==="narrow"},e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(t.BlockStack,{gap:"1000"},S&&e.createElement(t.Banner,{tone:"success",title:f.SubscribeSuccessTitle,onDismiss:()=>{Y(!1),window.history.replaceState({},document.title,window.location.pathname)}},f.SubscribeSuccessBody),e.createElement(re,{plans:W,onSelectPlan:s,planInterval:$,cardType:R.Horizontal,keyForRecommended:v,keyForCustomButtonLabel:h,trialDaysAsFeature:C,useShortFormPlanIntervals:w,showRecommendedPlanBadge:b}),(P==null?void 0:P.length)>0&&e.createElement(t.Divider,{borderColor:"border"}),(P==null?void 0:P.length)>0&&e.createElement(t.BlockStack,{gap:"300"},e.createElement(t.Box,{paddingInline:{xs:400,sm:0}},e.createElement(t.Text,{variant:"headingMd"},f.CustomPlans)),e.createElement(re,{plans:P,onSelectPlan:s,planInterval:$,cardType:R.Horizontal,keyForRecommended:v,keyForCustomButtonLabel:h,trialDaysAsFeature:C,useShortFormPlanIntervals:w,showRecommendedPlanBadge:b}))))))},de=({plan:n,t:c,translatePlanName:s,isRecommendedPlan:m=!1})=>e.createElement(t.BlockStack,null,e.createElement(t.InlineStack,{align:"space-between",gap:"100"},e.createElement(t.Text,{variant:"bodyLg"},s?c(n.name):n.name),m&&e.createElement(t.Badge,{tone:"success"},c(f.MostPopular))),n.description&&e.createElement(t.Text,{tone:"subdued"},c(n.description))),me=({plan:n,discount:c,t:s,useShortFormPlanIntervals:m=!0})=>e.createElement(t.BlockStack,{gap:"100"},!!c&&e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{variant:"headingXl"},V(c.discountedAmount,n.currency)),e.createElement(t.Text,{variant:"headingXl",tone:"subdued",fontWeight:"medium",textDecorationLine:"line-through"},n.amount),e.createElement(t.Text,{variant:"bodyLg",tone:"subdued"},s(f.Per)," ",s(ee({interval:n.interval,useShortFormPlanIntervals:m})))),!c&&e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{alignment:"center",variant:"headingXl"},V(n.amount,n.currency)),e.createElement(t.Text,{alignment:"center",variant:"bodyLg",tone:"subdued"},s(f.Per)," ",s(ee({interval:n.interval,useShortFormPlanIntervals:m})))),n.usageCharges&&n.usageCharges.length>0&&e.createElement(t.BlockStack,null,n.usageCharges.map((b,h)=>e.createElement(t.InlineStack,{key:`plan-usageCharge-${h}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:ie,tone:"positive"})),e.createElement(t.Text,{variant:"bodyLg"},s(b.terms)))))),ge=({plan:n,t:c,trialDaysAsFeature:s=!1})=>e.createElement(t.BlockStack,{gap:"100"},s&&n.trialDays&&n.trialDays>0?e.createElement(t.InlineStack,{align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:q,tone:"positive"})),e.createElement(t.Text,{tone:"subdued"},c(f.FreeTrialLength).replace("{{ trialDays }}",n.trialDays))):null,n.featuresOrder.map((m,b)=>{const h=n.features[m];if(h.type!=="boolean"||h.value===!0)return e.createElement(t.InlineStack,{key:`plan-feature-${b}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:q,tone:"positive"})),h.type==="boolean"?e.createElement(t.Text,{tone:"subdued"},c(h.name)):e.createElement(t.Text,{tone:"subdued"},h.value," ",c(h.name)))})),he=({plan:n,discount:c,buttonLabel:s,onSelectPlan:m,useShortFormPlanIntervals:b=!0,trialDaysAsFeature:h=!1,isRecommendedPlan:v=!1,isActivePlan:M=!1,t:C,translatePlanName:w=!0})=>{const[I,x]=e.useState(!1),B=C||(u=>u),T=async({plan:u,discount:g})=>{m?(x(!0),await m({plan:u,discount:g})!==!0&&x(!1)):console.log("No onSelectPlan callback provided")};return e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"400"},e.createElement(de,{plan:n,isRecommendedPlan:v,t:B,translatePlanName:w}),e.createElement(me,{plan:n,discount:c,useShortFormPlanIntervals:b,t:B}),e.createElement(t.Button,{size:"large",variant:v?"primary":"secondary",onClick:async()=>{await T({plan:n,discount:c})},disabled:M,loading:I},B(M?f.CurrentPlan:s||f.SelectPlan)),e.createElement(ge,{plan:n,trialDaysAsFeature:h,t:B})))},De=({customer:n,plans:c,onSubscribe:s,backUrl:m="",showRecommendedBadge:b=!0,customFieldCta:h=null,customFieldPlanRecommended:v="Recommended",showPlanIntervalToggle:M=!0,showTrialDaysAsFeature:C=!0,useShortFormPlanIntervals:w=!0,pageWidth:I="default",showCustomPlans:x=!0})=>{const B=n==null?void 0:n.subscription,T=new URLSearchParams(window.location.search),u=c.some(p=>p.interval===k.Annual)&&c.some(p=>p.interval===k.Every30Days),g=c.find(p=>p.id===(B==null?void 0:B.plan.id)),[$,H]=e.useState(g?g.interval:u?k.Annual:k.Every30Days),W=c.filter(p=>p.availability===ae.Public),P=x?c.filter(p=>p.availability!==ae.Public):[],[S,Y]=e.useState(T.get("subscribed")==="true");return e.createElement(t.Page,{title:f.Plans,backAction:m&&m!==""?{content:f.Back,url:m}:void 0,secondaryActions:M&&u?e.createElement(t.ButtonGroup,{variant:"segmented"},e.createElement(t.Button,{pressed:$===k.Every30Days,onClick:()=>H(k.Every30Days)},f.Monthly),e.createElement(t.Button,{pressed:$===k.Annual,onClick:()=>H(k.Annual)},f.Yearly)):void 0,fullWidth:I==="full",narrowWidth:I==="narrow"},e.createElement(t.Box,{paddingBlockEnd:"800"},e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(t.BlockStack,{gap:"1000"},S&&e.createElement(t.Banner,{tone:"success",title:f.SubscribeSuccessTitle,onDismiss:()=>{Y(!1),window.history.replaceState({},document.title,window.location.pathname)}},f.SubscribeSuccessBody),e.createElement(re,{plans:W,onSelectPlan:s,planInterval:$,cardType:R.Highlighted,keyForRecommended:v,keyForCustomButtonLabel:h,trialDaysAsFeature:C,useShortFormPlanIntervals:w,showRecommendedPlanBadge:b}),(P==null?void 0:P.length)>0&&e.createElement(t.Divider,{borderColor:"border"}),(P==null?void 0:P.length)>0&&e.createElement(t.BlockStack,{gap:"300"},e.createElement(t.Box,{paddingInline:{xs:400,sm:0}},e.createElement(t.Text,{variant:"headingMd"},f.CustomPlans)),e.createElement(re,{plans:P,onSelectPlan:s,planInterval:$,cardType:R.Highlighted,keyForRecommended:v,keyForCustomButtonLabel:h,trialDaysAsFeature:C,useShortFormPlanIntervals:w,showRecommendedPlanBadge:b})))))))},Te=({customer:n,plans:c,onSubscribe:s,backUrl:m="",showRecommendedBadge:b=!0,customFieldCta:h=null,customFieldPlanRecommended:v="Recommended",showPlanIntervalToggle:M=!1,showTrialDaysAsFeature:C=!0,useShortFormPlanIntervals:w=!0,pageWidth:I="default",showCustomPlans:x=!0})=>{const B=n==null?void 0:n.subscription,T=new URLSearchParams(window.location.search),u=c.some(a=>a.interval===k.Annual)&&c.some(a=>a.interval===k.Every30Days),g=c.find(a=>a.id===(B==null?void 0:B.plan.id)),[$,H]=e.useState(g?g.interval:u?k.Annual:k.Every30Days),W=c.filter(a=>a.availability!=="customerTag"&&a.availability!=="customer"),P=M&&u?W.filter(a=>a.interval===$):W,S=x?c.filter(a=>a.availability==="customerTag"||a.availability==="customer"):[],[Y,p]=e.useState(T.get("subscribed")==="true"),X=({plan:a,discount:_})=>e.createElement(t.BlockStack,null,e.createElement(t.Text,{variant:"bodyLg"},a.name),a.description&&e.createElement(t.Text,{tone:"subdued"},a.description)),U=({plan:a,discount:_})=>e.createElement(t.BlockStack,{gap:"200"},e.createElement(t.Text,{fontWeight:"medium"},f.Features),e.createElement(t.BlockStack,{gap:"100"},C&&a.trialDays!==0&&e.createElement(t.InlineStack,{align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:q,tone:"positive"})),e.createElement(t.Text,{tone:"subdued"},f.FreeTrialLength.replace("{{ trialDays }}",a.trialDays))),a.featuresOrder.map((F,o)=>{const l=a.features[F];if(l.type!=="boolean"||l.value===!0)return e.createElement(t.InlineStack,{key:`plan-feature-${o}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:q,tone:"positive"})),l.type==="boolean"?e.createElement(t.Text,{tone:"subdued"},l.name):e.createElement(t.Text,{tone:"subdued"},l.value," ",l.name))}))),G=({plan:a,discount:_})=>e.createElement(t.BlockStack,{gap:"100"},_?e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{variant:"headingXl"},V(_.discountedAmount,a.currency)),e.createElement(t.Text,{variant:"headingXl",tone:"subdued",fontWeight:"medium",textDecorationLine:"line-through"},a.amount),e.createElement(t.Text,{variant:"bodyLg",tone:"subdued"},f.Per," ",ee({interval:a.interval,useShortFormPlanIntervals:w}))):e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{alignment:"center",variant:"headingXl"},V(a.amount,a.currency)),e.createElement(t.Text,{alignment:"center",variant:"bodyLg",tone:"subdued"},f.Per," ",ee({interval:a.interval,useShortFormPlanIntervals:w}))),a.usageCharges.length>0&&e.createElement(t.BlockStack,null,a.usageCharges.map((F,o)=>e.createElement(t.InlineStack,{key:`plan-usageCharge-${o}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:ie,tone:"positive"})),e.createElement(t.Text,{variant:"bodyLg"},F.terms))))),A=({plan:a,discount:_})=>{const F=h&&a.customFields[h],o=a.customFields&&a.customFields[v];return e.createElement(t.InlineStack,{blockAlign:"center",gap:"400"},e.createElement(t.Button,{size:"large",variant:o?"primary":"secondary",onClick:()=>s({planId:a.id,discountId:_==null?void 0:_.id}),disabled:(g==null?void 0:g.id)===a.id},(g==null?void 0:g.id)===a.id?f.CurrentPlan:F?a.customFields[h]:f.SelectPlan),o&&b&&e.createElement(t.Box,null,e.createElement(t.Badge,{tone:"success"},f.MostPopular)))};return e.createElement(t.Page,{title:f.Plans,backAction:m!==""?{content:f.Back,url:m}:void 0,secondaryActions:M&&u?e.createElement(t.ButtonGroup,{variant:"segmented"},e.createElement(t.Button,{pressed:$===k.Every30Days,onClick:()=>H(k.Every30Days)},f.Monthly),e.createElement(t.Button,{pressed:$===k.Annual,onClick:()=>H(k.Annual)},f.Year)):void 0,fullWidth:I==="full",narrowWidth:I==="narrow"},e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(t.BlockStack,{gap:"400"},Y&&e.createElement(t.Banner,{tone:"success",title:f.SubscribeSuccessTitle,onDismiss:()=>{p(!1),window.history.replaceState({},document.title,window.location.pathname)}},f.SubscribeSuccessBody),P.map((a,_)=>{var o;const F=((o=a.discounts)==null?void 0:o.length)>0?a.discounts.reduce((l,r)=>l.discountedAmount<r.discountedAmount?l:r):null;return e.createElement(t.Card,{key:`plan-${_}`},e.createElement(t.Grid,null,e.createElement(t.Grid.Cell,{columnSpan:{xs:6,sm:6,md:3,lg:6,xl:12}},e.createElement(t.BlockStack,{gap:"400"},e.createElement(t.BlockStack,{gap:"200"},X({plan:a,discount:F}),G({plan:a,discount:F})),e.createElement(t.Box,null,A({plan:a,discount:F})))),e.createElement(t.Grid.Cell,{columnSpan:{xs:6,sm:6,md:3,lg:6,xl:12}},U({plan:a,discount:F}))))}),(S==null?void 0:S.length)>0&&e.createElement(t.Divider,{borderColor:"border"}),(S==null?void 0:S.length)>0&&e.createElement(t.BlockStack,{gap:"300"},e.createElement(t.Box,{paddingInline:{xs:400,sm:0}},e.createElement(t.Text,{variant:"headingMd"},f.CustomPlans)),e.createElement(t.Grid,null,S.map((a,_)=>{var o;const F=((o=a.discounts)==null?void 0:o.length)>0?a.discounts.reduce((l,r)=>l.discountedAmount<r.discountedAmount?l:r):null;return e.createElement(t.Grid.Cell,{key:`custom-plan-${_}`,columnSpan:columnSpan()},e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"400"},X({plan:a,discount:F}),G({plan:a,discount:F}),A({plan:a,discount:F}),U({plan:a,discount:F}))))})))))))};var Me=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ae(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ye={exports:{}};(function(n,c){(function(s,m){n.exports=m()})(Me,function(){var s=1e3,m=6e4,b=36e5,h="millisecond",v="second",M="minute",C="hour",w="day",I="week",x="month",B="quarter",T="year",u="date",g="Invalid Date",$=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,H=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,W={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(o){var l=["th","st","nd","rd"],r=o%100;return"["+o+(l[(r-20)%10]||l[r]||l[0])+"]"}},P=function(o,l,r){var d=String(o);return!d||d.length>=l?o:""+Array(l+1-d.length).join(r)+o},S={s:P,z:function(o){var l=-o.utcOffset(),r=Math.abs(l),d=Math.floor(r/60),i=r%60;return(l<=0?"+":"-")+P(d,2,"0")+":"+P(i,2,"0")},m:function o(l,r){if(l.date()<r.date())return-o(r,l);var d=12*(r.year()-l.year())+(r.month()-l.month()),i=l.clone().add(d,x),y=r-i<0,E=l.clone().add(d+(y?-1:1),x);return+(-(d+(r-i)/(y?i-E:E-i))||0)},a:function(o){return o<0?Math.ceil(o)||0:Math.floor(o)},p:function(o){return{M:x,y:T,w:I,d:w,D:u,h:C,m:M,s:v,ms:h,Q:B}[o]||String(o||"").toLowerCase().replace(/s$/,"")},u:function(o){return o===void 0}},Y="en",p={};p[Y]=W;var X="$isDayjsObject",U=function(o){return o instanceof _||!(!o||!o[X])},G=function o(l,r,d){var i;if(!l)return Y;if(typeof l=="string"){var y=l.toLowerCase();p[y]&&(i=y),r&&(p[y]=r,i=y);var E=l.split("-");if(!i&&E.length>1)return o(E[0])}else{var D=l.name;p[D]=l,i=D}return!d&&i&&(Y=i),i||!d&&Y},A=function(o,l){if(U(o))return o.clone();var r=typeof l=="object"?l:{};return r.date=o,r.args=arguments,new _(r)},a=S;a.l=G,a.i=U,a.w=function(o,l){return A(o,{locale:l.$L,utc:l.$u,x:l.$x,$offset:l.$offset})};var _=function(){function o(r){this.$L=G(r.locale,null,!0),this.parse(r),this.$x=this.$x||r.x||{},this[X]=!0}var l=o.prototype;return l.parse=function(r){this.$d=function(d){var i=d.date,y=d.utc;if(i===null)return new Date(NaN);if(a.u(i))return new Date;if(i instanceof Date)return new Date(i);if(typeof i=="string"&&!/Z$/i.test(i)){var E=i.match($);if(E){var D=E[2]-1||0,L=(E[7]||"0").substring(0,3);return y?new Date(Date.UTC(E[1],D,E[3]||1,E[4]||0,E[5]||0,E[6]||0,L)):new Date(E[1],D,E[3]||1,E[4]||0,E[5]||0,E[6]||0,L)}}return new Date(i)}(r),this.init()},l.init=function(){var r=this.$d;this.$y=r.getFullYear(),this.$M=r.getMonth(),this.$D=r.getDate(),this.$W=r.getDay(),this.$H=r.getHours(),this.$m=r.getMinutes(),this.$s=r.getSeconds(),this.$ms=r.getMilliseconds()},l.$utils=function(){return a},l.isValid=function(){return this.$d.toString()!==g},l.isSame=function(r,d){var i=A(r);return this.startOf(d)<=i&&i<=this.endOf(d)},l.isAfter=function(r,d){return A(r)<this.startOf(d)},l.isBefore=function(r,d){return this.endOf(d)<A(r)},l.$g=function(r,d,i){return a.u(r)?this[d]:this.set(i,r)},l.unix=function(){return Math.floor(this.valueOf()/1e3)},l.valueOf=function(){return this.$d.getTime()},l.startOf=function(r,d){var i=this,y=!!a.u(d)||d,E=a.p(r),D=function(J,N){var K=a.w(i.$u?Date.UTC(i.$y,N,J):new Date(i.$y,N,J),i);return y?K:K.endOf(w)},L=function(J,N){return a.w(i.toDate()[J].apply(i.toDate("s"),(y?[0,0,0,0]:[23,59,59,999]).slice(N)),i)},O=this.$W,z=this.$M,j=this.$D,Q="set"+(this.$u?"UTC":"");switch(E){case T:return y?D(1,0):D(31,11);case x:return y?D(1,z):D(0,z+1);case I:var Z=this.$locale().weekStart||0,te=(O<Z?O+7:O)-Z;return D(y?j-te:j+(6-te),z);case w:case u:return L(Q+"Hours",0);case C:return L(Q+"Minutes",1);case M:return L(Q+"Seconds",2);case v:return L(Q+"Milliseconds",3);default:return this.clone()}},l.endOf=function(r){return this.startOf(r,!1)},l.$set=function(r,d){var i,y=a.p(r),E="set"+(this.$u?"UTC":""),D=(i={},i[w]=E+"Date",i[u]=E+"Date",i[x]=E+"Month",i[T]=E+"FullYear",i[C]=E+"Hours",i[M]=E+"Minutes",i[v]=E+"Seconds",i[h]=E+"Milliseconds",i)[y],L=y===w?this.$D+(d-this.$W):d;if(y===x||y===T){var O=this.clone().set(u,1);O.$d[D](L),O.init(),this.$d=O.set(u,Math.min(this.$D,O.daysInMonth())).$d}else D&&this.$d[D](L);return this.init(),this},l.set=function(r,d){return this.clone().$set(r,d)},l.get=function(r){return this[a.p(r)]()},l.add=function(r,d){var i,y=this;r=Number(r);var E=a.p(d),D=function(z){var j=A(y);return a.w(j.date(j.date()+Math.round(z*r)),y)};if(E===x)return this.set(x,this.$M+r);if(E===T)return this.set(T,this.$y+r);if(E===w)return D(1);if(E===I)return D(7);var L=(i={},i[M]=m,i[C]=b,i[v]=s,i)[E]||1,O=this.$d.getTime()+r*L;return a.w(O,this)},l.subtract=function(r,d){return this.add(-1*r,d)},l.format=function(r){var d=this,i=this.$locale();if(!this.isValid())return i.invalidDate||g;var y=r||"YYYY-MM-DDTHH:mm:ssZ",E=a.z(this),D=this.$H,L=this.$m,O=this.$M,z=i.weekdays,j=i.months,Q=i.meridiem,Z=function(N,K,ne,le){return N&&(N[K]||N(d,y))||ne[K].slice(0,le)},te=function(N){return a.s(D%12||12,N,"0")},J=Q||function(N,K,ne){var le=N<12?"AM":"PM";return ne?le.toLowerCase():le};return y.replace(H,function(N,K){return K||function(ne){switch(ne){case"YY":return String(d.$y).slice(-2);case"YYYY":return a.s(d.$y,4,"0");case"M":return O+1;case"MM":return a.s(O+1,2,"0");case"MMM":return Z(i.monthsShort,O,j,3);case"MMMM":return Z(j,O);case"D":return d.$D;case"DD":return a.s(d.$D,2,"0");case"d":return String(d.$W);case"dd":return Z(i.weekdaysMin,d.$W,z,2);case"ddd":return Z(i.weekdaysShort,d.$W,z,3);case"dddd":return z[d.$W];case"H":return String(D);case"HH":return a.s(D,2,"0");case"h":return te(1);case"hh":return te(2);case"a":return J(D,L,!0);case"A":return J(D,L,!1);case"m":return String(L);case"mm":return a.s(L,2,"0");case"s":return String(d.$s);case"ss":return a.s(d.$s,2,"0");case"SSS":return a.s(d.$ms,3,"0");case"Z":return E}return null}(N)||E.replace(":","")})},l.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},l.diff=function(r,d,i){var y,E=this,D=a.p(d),L=A(r),O=(L.utcOffset()-this.utcOffset())*m,z=this-L,j=function(){return a.m(E,L)};switch(D){case T:y=j()/12;break;case x:y=j();break;case B:y=j()/3;break;case I:y=(z-O)/6048e5;break;case w:y=(z-O)/864e5;break;case C:y=z/b;break;case M:y=z/m;break;case v:y=z/s;break;default:y=z}return i?y:a.a(y)},l.daysInMonth=function(){return this.endOf(x).$D},l.$locale=function(){return p[this.$L]},l.locale=function(r,d){if(!r)return this.$L;var i=this.clone(),y=G(r,d,!0);return y&&(i.$L=y),i},l.clone=function(){return a.w(this.$d,this)},l.toDate=function(){return new Date(this.valueOf())},l.toJSON=function(){return this.isValid()?this.toISOString():null},l.toISOString=function(){return this.$d.toISOString()},l.toString=function(){return this.$d.toUTCString()},o}(),F=_.prototype;return A.prototype=F,[["$ms",h],["$s",v],["$m",M],["$H",C],["$W",w],["$M",x],["$y",T],["$D",u]].forEach(function(o){F[o[1]]=function(l){return this.$g(l,o[0],o[1])}}),A.extend=function(o,l){return o.$i||(o(l,_,A),o.$i=!0),A},A.locale=G,A.isDayjs=U,A.unix=function(o){return A(1e3*o)},A.en=p[Y],A.Ls=p,A.p={},A})})(ye);var Ie=ye.exports;const ue=Ae(Ie),ce=({orientation:n="horizontal",onShowPlans:c,onCancelPlan:s,onPlanCancelled:m=()=>{},cancelSubscription:b=async()=>{},i18n:h,subscription:v,refetch:M=async()=>{},t:C,translatePlanName:w=!0})=>{var U;const[I,x]=e.useState(!1),[B,T]=e.useState(!1),u=C||(G=>G),g={...f,...h||{}};if(!v)return e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"200"},e.createElement(t.Text,{variant:"headingMd"},u(g.Subscription)),e.createElement(t.Text,null,u(g.NotSubscribed)),e.createElement(t.InlineStack,{align:"end"},e.createElement(t.ButtonGroup,null,e.createElement(t.Button,{variant:"primary",onClick:c,accessibilityLabel:u(g.ChangePlan)},u(g.SelectPlan))))));const{plan:$}=v,H=V(v.total,$.currency),W=u($.interval===k.Annual?g.Year:g.Month),P=n==="horizontal"?t.InlineGrid:t.BlockStack,S=(U=v==null?void 0:v.appliedDiscount)==null?void 0:U.discount,Y=S?S.percentage?`${S.percentage}%`:V(S.amount,$.currency):null,p=S&&v.appliedDiscount.discountEndsAt&&ue().isAfter(ue(v.appliedDiscount.discountEndsAt)),X=S?{xs:1,md:3}:{xs:1,md:2};return e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"200"},e.createElement(t.Text,{variant:"headingMd"},u(g.Subscription)),e.createElement(t.BlockStack,{gap:"400"},e.createElement(P,{columns:X,gap:"300"},e.createElement(t.BlockStack,null,e.createElement(t.Text,null,u(g.CurrentPlan)),e.createElement(t.Text,{tone:"subdued"},w?u($.name):$.name)),e.createElement(t.BlockStack,null,e.createElement(t.Text,null,u(g.Price)),e.createElement(t.BlockStack,null,e.createElement(t.Text,{tone:"subdued"},u(g.AmountPerInterval).replace("{{ amount }}",H).replace("{{ interval }}",W)),S&&!p&&e.createElement(t.Text,{tone:"success"},u(g.DiscountAmount).replace("{{ amount }}",Y)),S&&p&&e.createElement(t.Text,{tone:"subdued",textDecorationLine:"line-through"},u(g.DiscountAmountExpired).replace("{{ amount }}",Y)))),$.usageCharges.length>0&&e.createElement(t.BlockStack,null,e.createElement(t.Text,null,u(g.UsageCharges||"Usage charges")),$.usageCharges.map((G,A)=>e.createElement(t.Text,{key:`usage-charge-${A}`,tone:"subdued"},u(G.terms))))),e.createElement(t.InlineStack,{align:"end"},e.createElement(t.ButtonGroup,null,e.createElement(t.Button,{onClick:()=>{s?s():x(!0)},accessibilityLabel:u(g.CancelPlan),tone:"critical"},u(g.CancelPlan)),e.createElement(t.Button,{variant:"primary",onClick:c,accessibilityLabel:u(g.ChangePlan)},u(g.ChangePlan)))))),I&&e.createElement(t.Modal,{open:!0,onClose:()=>x(!1),title:u(g.CancelPlan),primaryAction:{content:u(g.CancelPlan),destructive:!0,loading:B,disabled:B,onAction:async()=>{T(!0),await b(),await M(),T(!1),x(!1),m()}},secondaryActions:[{content:u(g.Back),disabled:B,onAction:()=>x(!1)}]},e.createElement(t.Modal.Section,null,u(g.CancelConfirmation))))},Le=({backUrl:n="",pageWidth:c="narrow"})=>{const{cancelSubscription:s,i18n:m,subscription:b,refetch:h}=fe(),v=()=>{console.log("Show plans. Navigate to the plans page, open a modal, etc.")};return e.createElement(t.Page,{title:m.Subscription,backAction:n?{content:m.Back,url:n}:void 0,fullWidth:c==="full",narrowWidth:c==="narrow"},e.createElement(t.BlockStack,{gap:"400"},e.createElement(ce,{onShowPlans:v,cancelSubscription:s,i18n:m,subscription:b,refetch:h}),e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(ce,{onShowPlans:v,cancelSubscription:s,i18n:m,subscription:b,refetch:h})),e.createElement(t.Layout.Section,{variant:"oneThird"},e.createElement(ce,{onShowPlans:v,cancelSubscription:s,i18n:m,subscription:b,refetch:h,orientation:"vertical"})))))};exports.HighlightedPlanCards=De;exports.HorizontalPlanCard=he;exports.HorizontalPlanCards=we;exports.PlanCardStack=re;exports.PlanCardType=R;exports.PlanFeaturesSection=ge;exports.PlanPricingSection=me;exports.PlanTitleSection=de;exports.SubscriptionSummaryCard=ce;exports.SubscriptionSummaryPage=Le;exports.VerticalPlanCards=Te;
